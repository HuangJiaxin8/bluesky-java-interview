<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.66" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/java/Spring.html"><meta property="og:site_name" content="BlueSky的八股文"><meta property="og:title" content="Spring"><meta property="og:description" content="Spring IOC/AOP Spring的理解（IOC和AOP） 首先，spring是个庞大的项目，从官网可以看到包括了： SpringFramework SpringData SpringSecurity SpringBoot SpringCloud 当然，除了这些之外，Spring还包括很多其他的项目 Spring最主要的有两个特点是IOC和AOP IOC: IOC就是控制反转，指的是创建对象控制权的转移，以前创建对象的时候都是自己控制，现在Spring容器会根据配置文件去帮我们创建和管理对象。 好处：解耦合，对象的属性只需要在配置文件中写，不用在java代码写，把属性与java代码解耦合。 原理：使用反射机制，根据配置文件信息去创建对象。使用了工厂的设计模式。 Spring的IOC有三种注入方式 ：构造器注入、setter方法注入、根据注解注入。 AOP: 把公共的代码提取出来，进行封装。 减少系统代码重复量，降低模块耦合度。 原理：基于动态代理 要代理的对象实现了接口，就用JDK动态代理生成代理类。 没有实现接口，就用cglib，实现子类的方式生成代理类。 孙帅的IOC和DI IOC 控制反转 控制：对于成员变量赋值的控制权 控制反转：把成员变量赋值的控制权，从代码中反转到Spring工厂和配置文件中完成。 好处：解耦合 底层实现：反射加工厂设计模式 DI 依赖注入 当一个类需要另一个类时，就意味着依赖，一旦出现了依赖，那么就可以把另一个类作为本类的成员变量，最终通过Spring配置文件注入。 类加载器的作用 通过类加载器把对应class文件加载到JVM 通过类加载器创建类的Class对象，进而创建这个类的对象 User —&gt; user User类的Class对象 —&gt;new User() —&gt;user 如何获取类加载器：每一个.class文件，JVM会自动分配与之对应的ClassLoader 代理创建3要素（孙帅） 原始对象 额外功能 代理对象和原始对象实现相同的接口 JDK动态代理 （孙帅） Proxy.newProxyInstance(classloader,interfacce,invocationhandler) 为什么JDK动态代理中，该api需要我们传入classloader？ 创建代理类的对象需要用到类加载器 JDK动态代理没有相应的class文件，那么JVM就不会为其分配ClassLoader，所以需要我们为其指定classLoader（借用类加载器）。 Spring AOP和AspectJ 有什么区别？ AOP是运行时增强，AspectJ是编译时增强。 AOP是动态代理方式实现，AspectJ是基于ASM修改字节码。 AspectJ性能比较好，切面多的话，用AspectJ Spring切面的五种通知类型 before，前置通知，在方法调用前执行 after 方法执行后调用 around 之前之后都执行 after-returning 方法成功执行完成后执行 after-throwing 方法执行报错后执行 Autowired和Resource关键字的区别？ 共同点： 写在字段或者Setter方法上 都用于bean的注入 不同点： Autowired是Spring 提供的注解，而@Resource是javax包的注解 Autowired 是ByType来装配对象，如果想ByName可以通过配合@Qualifer使用，而@Resource默认是根据ByName来装配，如果想改为ByType，使用type属性 Spring bean 的生命周期 实例化bean：推断构造方法，实例化bean 设置对象属性（依赖注入）：实例化后的baen被封装到beanWrapper中，完成依赖注入 处理Aware接口： 如果Bean实现了BeanNameAware接口，会调用setBeanName()方法 如果实现了BeanFactoryAware接口，调用setBeanFactory()方法 BeanPostProcessor 如果bean实现了BeanPostProcessor接口，那么会调用postprocessBeforeInitialization() 初始化 如果Bean中的某个方法被@PostConstruct 标记，那么就去调用它 如果实现了InitializingBean，调用afterPropertiesSet方法 如果Bean 指定了init-method 方法，那么就去调用它。 如果Bean实现了BeanPostProcessor接口，会调用postProcessAfterInitialization() bean不再需要的时候，会被销毁，如果实现了disposableBean接口，那么就调用destory方法。 bean的作用域 singleton：默认，容器只有一个bean prototype：每个请求创建一个bean request：每个网络请求创建一个bean session：每个session创建一个bean global-session：global-session跟Portlet应用相关的 Spring中单例bean是线程安全的吗 关于单例bean的线程安全问题需要由开发者自己去控制，Spring并没有做线程安全方面的控制 Spring 基于xml注入的方式有哪些 Set方法注入 构造器注入 Spring如何解决循环依赖问题（简单版本） 对于普通Java对象，对象之间的依赖问题很好解决，比如X依赖Y，Y依赖X。 X x= new X(); x.setY (); Y y=new Y();y.setX() 由于Spring bean 有着复杂的生命周期，所以解决循环依赖问题也稍微麻烦一点，主要影响的是 实例化 填充属性 初始化 Spring 使用了三级缓存来解决循环依赖的问题 singletonObjects 用于存放可以直接使用的单例bean earlySingletonObjects 用于存放没填充属性的bean singletonFactories 存放bean工厂 对于对象A依赖B，对象B依赖A的情况 在对象A实例化后，会提前暴露到earlySingletonObjects 接着填充属性，发现此时依赖了B，发现没有B，走B的创建过程 B实例化后，填充属性，发现依赖了A，从earlySingletonObjects 中获取到了未填充属性的A，设置A，完成初始化后把自己放到singletonObjects里 返回A继续填充B，发现B已经在singletonObjects里面了，直接填充B 解决了循环依赖问题 前面有提到三级缓存，三级缓存的作用是什么？ 三级缓存是用来存储代理 Bean，当调用 getBean()方法时，发现目标 Bean 需要通过代理工厂来创建，此时会将创建好的实例保存到三级缓存，最终也会将赋值好的 Bean 同步到一级缓存中。 Spring 中哪些情况下，不能解决循环依赖问题？ 多例 Bean 通过 setter 注入的情况，不能解决循环依赖问题 构造器注入的 Bean 的情况，不能解决循环依赖问题 单例的代理 Bean 通过 Setter 注入的情况，不能解决循环依赖问题 设置了@DependsOn 的 Bean 的情况，不能解决循环依赖问 Spring的循环依赖（子路老师https://www.bilibili.com/video/BV1Ga4y1E7Br） 对于普通的Java对象的循环依赖问题，他们之间是很好解决的，比如X依赖Y，Y依赖X，这种是很好解决的： X x= new X(); x.setY (); Y y=new Y();y.setX() Spring的循环依赖之所以复杂，是因为Spring Bean有着不同于普通Java对象的复杂生命周期，所以要讲一下Spring Bean的生命周期 首先Spring 容器启动后，他会去做一个扫描，扫描之后把他变成BeanDefinition存到一个BeanDefinitionMap中 然后对这个Map去遍历，并做验证，比如验证是否单例，是否懒加载，是否有depend on，是否抽象等等。 然后获取当前实例化的类有没有存在单例池中，有没有被提前暴露。如果没有被提前暴露的话，Spring Bean就会被开始创建。 通过推断构造方法，推断出一个最佳的构造方法，然后通过反射去实例化Java对象 判断是否做BeanDefinition的合并，Spring容器是否支持循环依赖，如果支持循环依赖的话，会提前暴露一个半成品的Bean到ObjectFactory，存到一个二级缓存Map中。 做一些属性填充 做一些Aware接口的回调，比如BeanNameAware，ApplicationContextAware，ClassLoaderAware等等。 如果实现了PostProcessor接口的话，就做初始化之前的方法回调。 然后做一些初始化的回调，@PostConstruct，InitializingBean，或者init-method方法。 如果实现了PostProcessor接口的话，就做初始化之后的方法回调。 这样的话，整个Spring Bean基本可以满足使用了。把这个Bean放入到单例池。 Spring的循环依赖解决大概： 实例化X的时候，首先对X做一些基本的验证，验证完之后，看一下X所对应的ObjectFactory有没有提前暴露，这种时候肯定是没有的 ，接着就推断构造方法。接着就把X实例化出来，X实例化出来就会提前暴露。接着就是X的属性填充，发现了需要填充Y。 发现Y并没有被实例化，走Y的生命周期过程，发现Y也没有提前暴露，继续走实例化Y，实例化Y后继续往下执行，把Y提前暴露。接着做Y的属性填充，发现需要填充X，但是X并没有在单例池中（X实例化只是走了一半）。 继续走X的生命周期流程，当走到去二级缓存中找的时候找到了-&gt;往Y中注入X的objectFactory对象-&gt;解决循环依赖。 Spring 实例化Bean推断构造方法 如果@Autowired指定了构造方法，那么就使用该构造方法 如果没有指定 优先使用无参构造 如果没有无参构造方法，有两个及以上的构造方法，会报错 Spring事务实现方式 编程事务 声明式事务@Transcation Spring事务的传播级别（7个） PROPAGATION_REQUIRED：默认的Spring事务传播级别，若当前存在事务就加入事务，没有就创建一个 PAOPAGATION_REQUIRE_NEW：不管有没有事务都新建一个，新老事务相互独立 PROPAGATION_SUPPORTS：当前存在事务，就加入其中，没有事务就不走事务 PROPAGATION_NOT_SUPPORTED：以非事务的方式运行，存在事务就先把事务挂起 PROPAGATION_MANDATORY：强制事务执行，若当前不存在，则抛出异常 PROPAGATION_NEVER: 以非事务的方式执行，如果当前存在事务，则抛出异常 PROPAGATION_NESTED：存在事务，嵌套其中，没有事务，创建一个 Spring 事务失效的原因 数据库存储引擎不支持事务 异常被捕获，没有抛出异常 异常类型错误，默认是RuntimeExcetion 注解所在的方法不是public 事务类没有被spring容器管理 事务属性配置不正确，propagation属性配置为不适用事务 数据源没有加载事务管理器 发生自调用的情况 事务注解的本质原理是什么 事务注解仅仅代表事务相关的元数据，在运行时被事务基础设施读取并消费，根据这些元数据来配置事务的行为。事务注解主要依赖于Spring AOP，使用了一个事务拦截器，在方法调用前后进行事务增强。 Spring 框架中用到了哪些设计模式？ 工厂设计模式 : Spring 使用工厂模式通过 BeanFactory、ApplicationContext 创建 bean 对象。 代理设计模式 : Spring AOP 功能的实现。 单例设计模式 : Spring 中的 Bean 默认都是单例的。 原型模式：Spring Bean 如果配置了prototype模式的话，那么每次都会通过克隆的方式生成新对象。 模板方法模式 : Spring 中 jdbcTemplate、hibernateTemplate 等以 Template 结尾的对数据库操作的类，它们就使用到了模板模式。 观察者模式: Spring 中的 Event 和 Listener。 spring 事件：ApplicationEvent，该抽象类继承了EventObject 类，JDK 建议所有的事件都应该继承自 EventObject。 spring 事件监听器：ApplicationListener，该接口继承了 EventListener 接口，JDK 建议所有的事件监听器都应该继承EventListener。 BeanPostProcessor与BeanFactoryPostProcessor的区别 说说Spring 中 ApplicationContext 和 BeanFactory 的区别 BeanFactory是最原始的接口，提供了最基本的容器功能 ApplicationContext实现了BeanFactory 接口，对容器的功能做了进一步的扩展，比如 支持了国际化 支持事件发布与监听 支持读取环境变量 ApplicationContext的初始化和BeanFactory有一个重大的区别:BeanFactory在初始化容器时，并未实例化Bean,直到第一次访问某个Bean时才实例目标Bean;而ApplicationContext则在初始化应用上下文时就实例化所有的单实例的Bean。因此ApplicationContext的初始化时间会比BeanFactory稍长一些。 SpringIOC的启动流程 IOC 是什么 IOC是控制反转，把对象的控制权转移到ioc容器。应用程序如果需要使用到某个对象实例，直接从 IOC 容器中去获取就行，这样设计的好处是降低了程序里面对象与对象之间的耦合性。 Bean的声明方式 spring声明bean的方式有很多种，可以在xml配置，@Bean注解，@Component，@Service，@Repository等等。 Spring 在启动的时候会去扫描解析这些bean，然后保存到ioc容器中 ioc的工作流程大致分为两个阶段 ioc的初始化 通过xml配置或者注解配置信息解析生成BeanDefiniton，注册到BeanDefinitonMap 遍历这个map，走bean的生命周期 ioc容器的使用方式 通过@Autowired自动注入 通过BeanFactory.getBean() 获取IOC容器的bean 另外，需要注意的是，对于那些指定lazy-init的bean，ioc容器启动的时候不会去实例化它，而是在第一次获取的时候去实例化它，而且ioc容器不会去管理这些bean Spring常用的注解 创建Bean的注解 @Configuration 配合@Bean @Component @Controller @Service @Repository 注入属性 @Autowired @Qualifier @Resource @Value 作用域注解 @Scope 配置类相关 @ComponentScan @Import @PropertySource 指定Properties文件的位置"><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="article:author" content="blueSky"><meta property="article:tag" content="spring"><meta property="article:tag" content="springboot"><meta property="article:published_time" content="2023-08-08T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Spring","image":[""],"datePublished":"2023-08-08T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"blueSky","url":"https://mister-hope.com"}]}</script><title>Spring | BlueSky的八股文</title><meta name="description" content="Spring IOC/AOP Spring的理解（IOC和AOP） 首先，spring是个庞大的项目，从官网可以看到包括了： SpringFramework SpringData SpringSecurity SpringBoot SpringCloud 当然，除了这些之外，Spring还包括很多其他的项目 Spring最主要的有两个特点是IOC和AOP IOC: IOC就是控制反转，指的是创建对象控制权的转移，以前创建对象的时候都是自己控制，现在Spring容器会根据配置文件去帮我们创建和管理对象。 好处：解耦合，对象的属性只需要在配置文件中写，不用在java代码写，把属性与java代码解耦合。 原理：使用反射机制，根据配置文件信息去创建对象。使用了工厂的设计模式。 Spring的IOC有三种注入方式 ：构造器注入、setter方法注入、根据注解注入。 AOP: 把公共的代码提取出来，进行封装。 减少系统代码重复量，降低模块耦合度。 原理：基于动态代理 要代理的对象实现了接口，就用JDK动态代理生成代理类。 没有实现接口，就用cglib，实现子类的方式生成代理类。 孙帅的IOC和DI IOC 控制反转 控制：对于成员变量赋值的控制权 控制反转：把成员变量赋值的控制权，从代码中反转到Spring工厂和配置文件中完成。 好处：解耦合 底层实现：反射加工厂设计模式 DI 依赖注入 当一个类需要另一个类时，就意味着依赖，一旦出现了依赖，那么就可以把另一个类作为本类的成员变量，最终通过Spring配置文件注入。 类加载器的作用 通过类加载器把对应class文件加载到JVM 通过类加载器创建类的Class对象，进而创建这个类的对象 User —&gt; user User类的Class对象 —&gt;new User() —&gt;user 如何获取类加载器：每一个.class文件，JVM会自动分配与之对应的ClassLoader 代理创建3要素（孙帅） 原始对象 额外功能 代理对象和原始对象实现相同的接口 JDK动态代理 （孙帅） Proxy.newProxyInstance(classloader,interfacce,invocationhandler) 为什么JDK动态代理中，该api需要我们传入classloader？ 创建代理类的对象需要用到类加载器 JDK动态代理没有相应的class文件，那么JVM就不会为其分配ClassLoader，所以需要我们为其指定classLoader（借用类加载器）。 Spring AOP和AspectJ 有什么区别？ AOP是运行时增强，AspectJ是编译时增强。 AOP是动态代理方式实现，AspectJ是基于ASM修改字节码。 AspectJ性能比较好，切面多的话，用AspectJ Spring切面的五种通知类型 before，前置通知，在方法调用前执行 after 方法执行后调用 around 之前之后都执行 after-returning 方法成功执行完成后执行 after-throwing 方法执行报错后执行 Autowired和Resource关键字的区别？ 共同点： 写在字段或者Setter方法上 都用于bean的注入 不同点： Autowired是Spring 提供的注解，而@Resource是javax包的注解 Autowired 是ByType来装配对象，如果想ByName可以通过配合@Qualifer使用，而@Resource默认是根据ByName来装配，如果想改为ByType，使用type属性 Spring bean 的生命周期 实例化bean：推断构造方法，实例化bean 设置对象属性（依赖注入）：实例化后的baen被封装到beanWrapper中，完成依赖注入 处理Aware接口： 如果Bean实现了BeanNameAware接口，会调用setBeanName()方法 如果实现了BeanFactoryAware接口，调用setBeanFactory()方法 BeanPostProcessor 如果bean实现了BeanPostProcessor接口，那么会调用postprocessBeforeInitialization() 初始化 如果Bean中的某个方法被@PostConstruct 标记，那么就去调用它 如果实现了InitializingBean，调用afterPropertiesSet方法 如果Bean 指定了init-method 方法，那么就去调用它。 如果Bean实现了BeanPostProcessor接口，会调用postProcessAfterInitialization() bean不再需要的时候，会被销毁，如果实现了disposableBean接口，那么就调用destory方法。 bean的作用域 singleton：默认，容器只有一个bean prototype：每个请求创建一个bean request：每个网络请求创建一个bean session：每个session创建一个bean global-session：global-session跟Portlet应用相关的 Spring中单例bean是线程安全的吗 关于单例bean的线程安全问题需要由开发者自己去控制，Spring并没有做线程安全方面的控制 Spring 基于xml注入的方式有哪些 Set方法注入 构造器注入 Spring如何解决循环依赖问题（简单版本） 对于普通Java对象，对象之间的依赖问题很好解决，比如X依赖Y，Y依赖X。 X x= new X(); x.setY (); Y y=new Y();y.setX() 由于Spring bean 有着复杂的生命周期，所以解决循环依赖问题也稍微麻烦一点，主要影响的是 实例化 填充属性 初始化 Spring 使用了三级缓存来解决循环依赖的问题 singletonObjects 用于存放可以直接使用的单例bean earlySingletonObjects 用于存放没填充属性的bean singletonFactories 存放bean工厂 对于对象A依赖B，对象B依赖A的情况 在对象A实例化后，会提前暴露到earlySingletonObjects 接着填充属性，发现此时依赖了B，发现没有B，走B的创建过程 B实例化后，填充属性，发现依赖了A，从earlySingletonObjects 中获取到了未填充属性的A，设置A，完成初始化后把自己放到singletonObjects里 返回A继续填充B，发现B已经在singletonObjects里面了，直接填充B 解决了循环依赖问题 前面有提到三级缓存，三级缓存的作用是什么？ 三级缓存是用来存储代理 Bean，当调用 getBean()方法时，发现目标 Bean 需要通过代理工厂来创建，此时会将创建好的实例保存到三级缓存，最终也会将赋值好的 Bean 同步到一级缓存中。 Spring 中哪些情况下，不能解决循环依赖问题？ 多例 Bean 通过 setter 注入的情况，不能解决循环依赖问题 构造器注入的 Bean 的情况，不能解决循环依赖问题 单例的代理 Bean 通过 Setter 注入的情况，不能解决循环依赖问题 设置了@DependsOn 的 Bean 的情况，不能解决循环依赖问 Spring的循环依赖（子路老师https://www.bilibili.com/video/BV1Ga4y1E7Br） 对于普通的Java对象的循环依赖问题，他们之间是很好解决的，比如X依赖Y，Y依赖X，这种是很好解决的： X x= new X(); x.setY (); Y y=new Y();y.setX() Spring的循环依赖之所以复杂，是因为Spring Bean有着不同于普通Java对象的复杂生命周期，所以要讲一下Spring Bean的生命周期 首先Spring 容器启动后，他会去做一个扫描，扫描之后把他变成BeanDefinition存到一个BeanDefinitionMap中 然后对这个Map去遍历，并做验证，比如验证是否单例，是否懒加载，是否有depend on，是否抽象等等。 然后获取当前实例化的类有没有存在单例池中，有没有被提前暴露。如果没有被提前暴露的话，Spring Bean就会被开始创建。 通过推断构造方法，推断出一个最佳的构造方法，然后通过反射去实例化Java对象 判断是否做BeanDefinition的合并，Spring容器是否支持循环依赖，如果支持循环依赖的话，会提前暴露一个半成品的Bean到ObjectFactory，存到一个二级缓存Map中。 做一些属性填充 做一些Aware接口的回调，比如BeanNameAware，ApplicationContextAware，ClassLoaderAware等等。 如果实现了PostProcessor接口的话，就做初始化之前的方法回调。 然后做一些初始化的回调，@PostConstruct，InitializingBean，或者init-method方法。 如果实现了PostProcessor接口的话，就做初始化之后的方法回调。 这样的话，整个Spring Bean基本可以满足使用了。把这个Bean放入到单例池。 Spring的循环依赖解决大概： 实例化X的时候，首先对X做一些基本的验证，验证完之后，看一下X所对应的ObjectFactory有没有提前暴露，这种时候肯定是没有的 ，接着就推断构造方法。接着就把X实例化出来，X实例化出来就会提前暴露。接着就是X的属性填充，发现了需要填充Y。 发现Y并没有被实例化，走Y的生命周期过程，发现Y也没有提前暴露，继续走实例化Y，实例化Y后继续往下执行，把Y提前暴露。接着做Y的属性填充，发现需要填充X，但是X并没有在单例池中（X实例化只是走了一半）。 继续走X的生命周期流程，当走到去二级缓存中找的时候找到了-&gt;往Y中注入X的objectFactory对象-&gt;解决循环依赖。 Spring 实例化Bean推断构造方法 如果@Autowired指定了构造方法，那么就使用该构造方法 如果没有指定 优先使用无参构造 如果没有无参构造方法，有两个及以上的构造方法，会报错 Spring事务实现方式 编程事务 声明式事务@Transcation Spring事务的传播级别（7个） PROPAGATION_REQUIRED：默认的Spring事务传播级别，若当前存在事务就加入事务，没有就创建一个 PAOPAGATION_REQUIRE_NEW：不管有没有事务都新建一个，新老事务相互独立 PROPAGATION_SUPPORTS：当前存在事务，就加入其中，没有事务就不走事务 PROPAGATION_NOT_SUPPORTED：以非事务的方式运行，存在事务就先把事务挂起 PROPAGATION_MANDATORY：强制事务执行，若当前不存在，则抛出异常 PROPAGATION_NEVER: 以非事务的方式执行，如果当前存在事务，则抛出异常 PROPAGATION_NESTED：存在事务，嵌套其中，没有事务，创建一个 Spring 事务失效的原因 数据库存储引擎不支持事务 异常被捕获，没有抛出异常 异常类型错误，默认是RuntimeExcetion 注解所在的方法不是public 事务类没有被spring容器管理 事务属性配置不正确，propagation属性配置为不适用事务 数据源没有加载事务管理器 发生自调用的情况 事务注解的本质原理是什么 事务注解仅仅代表事务相关的元数据，在运行时被事务基础设施读取并消费，根据这些元数据来配置事务的行为。事务注解主要依赖于Spring AOP，使用了一个事务拦截器，在方法调用前后进行事务增强。 Spring 框架中用到了哪些设计模式？ 工厂设计模式 : Spring 使用工厂模式通过 BeanFactory、ApplicationContext 创建 bean 对象。 代理设计模式 : Spring AOP 功能的实现。 单例设计模式 : Spring 中的 Bean 默认都是单例的。 原型模式：Spring Bean 如果配置了prototype模式的话，那么每次都会通过克隆的方式生成新对象。 模板方法模式 : Spring 中 jdbcTemplate、hibernateTemplate 等以 Template 结尾的对数据库操作的类，它们就使用到了模板模式。 观察者模式: Spring 中的 Event 和 Listener。 spring 事件：ApplicationEvent，该抽象类继承了EventObject 类，JDK 建议所有的事件都应该继承自 EventObject。 spring 事件监听器：ApplicationListener，该接口继承了 EventListener 接口，JDK 建议所有的事件监听器都应该继承EventListener。 BeanPostProcessor与BeanFactoryPostProcessor的区别 说说Spring 中 ApplicationContext 和 BeanFactory 的区别 BeanFactory是最原始的接口，提供了最基本的容器功能 ApplicationContext实现了BeanFactory 接口，对容器的功能做了进一步的扩展，比如 支持了国际化 支持事件发布与监听 支持读取环境变量 ApplicationContext的初始化和BeanFactory有一个重大的区别:BeanFactory在初始化容器时，并未实例化Bean,直到第一次访问某个Bean时才实例目标Bean;而ApplicationContext则在初始化应用上下文时就实例化所有的单实例的Bean。因此ApplicationContext的初始化时间会比BeanFactory稍长一些。 SpringIOC的启动流程 IOC 是什么 IOC是控制反转，把对象的控制权转移到ioc容器。应用程序如果需要使用到某个对象实例，直接从 IOC 容器中去获取就行，这样设计的好处是降低了程序里面对象与对象之间的耦合性。 Bean的声明方式 spring声明bean的方式有很多种，可以在xml配置，@Bean注解，@Component，@Service，@Repository等等。 Spring 在启动的时候会去扫描解析这些bean，然后保存到ioc容器中 ioc的工作流程大致分为两个阶段 ioc的初始化 通过xml配置或者注解配置信息解析生成BeanDefiniton，注册到BeanDefinitonMap 遍历这个map，走bean的生命周期 ioc容器的使用方式 通过@Autowired自动注入 通过BeanFactory.getBean() 获取IOC容器的bean 另外，需要注意的是，对于那些指定lazy-init的bean，ioc容器启动的时候不会去实例化它，而是在第一次获取的时候去实例化它，而且ioc容器不会去管理这些bean Spring常用的注解 创建Bean的注解 @Configuration 配合@Bean @Component @Controller @Service @Repository 注入属性 @Autowired @Qualifier @Resource @Value 作用域注解 @Scope 配置类相关 @ComponentScan @Import @PropertySource 指定Properties文件的位置">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-1dd6ee92.css" as="style"><link rel="stylesheet" href="/assets/style-1dd6ee92.css">
    <link rel="modulepreload" href="/assets/app-a0ba2b3f.js"><link rel="modulepreload" href="/assets/Spring.html-88c0249a.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/Spring.html-40ec4a50.js"><link rel="prefetch" href="/assets/index.html-9e4e498c.js" as="script"><link rel="prefetch" href="/assets/Java基础.html-d26b0c06.js" as="script"><link rel="prefetch" href="/assets/Java集合容器.html-8f79902b.js" as="script"><link rel="prefetch" href="/assets/JVM.html-1909356c.js" as="script"><link rel="prefetch" href="/assets/Linux.html-e5d9d88d.js" as="script"><link rel="prefetch" href="/assets/mq.html-84615eb4.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-3012ac70.js" as="script"><link rel="prefetch" href="/assets/Redis.html-8ccf98f5.js" as="script"><link rel="prefetch" href="/assets/多线程与并发.html-a5d441dd.js" as="script"><link rel="prefetch" href="/assets/404.html-90b8d879.js" as="script"><link rel="prefetch" href="/assets/index.html-cf72b280.js" as="script"><link rel="prefetch" href="/assets/index.html-731d885c.js" as="script"><link rel="prefetch" href="/assets/index.html-b5a32d80.js" as="script"><link rel="prefetch" href="/assets/index.html-e43c737d.js" as="script"><link rel="prefetch" href="/assets/index.html-62fb6734.js" as="script"><link rel="prefetch" href="/assets/index.html-2a4af82e.js" as="script"><link rel="prefetch" href="/assets/index.html-3ba1cbbc.js" as="script"><link rel="prefetch" href="/assets/index.html-7018d6bd.js" as="script"><link rel="prefetch" href="/assets/index.html-bdee41eb.js" as="script"><link rel="prefetch" href="/assets/index.html-2f4bf1bc.js" as="script"><link rel="prefetch" href="/assets/index.html-d25bd0f9.js" as="script"><link rel="prefetch" href="/assets/index.html-a4aa02bc.js" as="script"><link rel="prefetch" href="/assets/index.html-2ca22468.js" as="script"><link rel="prefetch" href="/assets/index.html-4f0e6172.js" as="script"><link rel="prefetch" href="/assets/index.html-562c2edc.js" as="script"><link rel="prefetch" href="/assets/index.html-60616476.js" as="script"><link rel="prefetch" href="/assets/index.html-36e023fb.js" as="script"><link rel="prefetch" href="/assets/index.html-6507fd83.js" as="script"><link rel="prefetch" href="/assets/index.html-649287d1.js" as="script"><link rel="prefetch" href="/assets/index.html-1a931a21.js" as="script"><link rel="prefetch" href="/assets/index.html-9a29c684.js" as="script"><link rel="prefetch" href="/assets/index.html-69995d16.js" as="script"><link rel="prefetch" href="/assets/index.html-8cd25fe6.js" as="script"><link rel="prefetch" href="/assets/Java基础.html-d30d048a.js" as="script"><link rel="prefetch" href="/assets/Java集合容器.html-64c299d4.js" as="script"><link rel="prefetch" href="/assets/JVM.html-c36d949e.js" as="script"><link rel="prefetch" href="/assets/Linux.html-e74b50e4.js" as="script"><link rel="prefetch" href="/assets/mq.html-bfa3c7bf.js" as="script"><link rel="prefetch" href="/assets/MySQL.html-fc0954a2.js" as="script"><link rel="prefetch" href="/assets/Redis.html-d0472e2f.js" as="script"><link rel="prefetch" href="/assets/多线程与并发.html-7b92520b.js" as="script"><link rel="prefetch" href="/assets/404.html-77c2b8d8.js" as="script"><link rel="prefetch" href="/assets/index.html-cb6a8dce.js" as="script"><link rel="prefetch" href="/assets/index.html-4d7901a4.js" as="script"><link rel="prefetch" href="/assets/index.html-28809eb8.js" as="script"><link rel="prefetch" href="/assets/index.html-023eaa39.js" as="script"><link rel="prefetch" href="/assets/index.html-127942ea.js" as="script"><link rel="prefetch" href="/assets/index.html-c19f9382.js" as="script"><link rel="prefetch" href="/assets/index.html-10f765f8.js" as="script"><link rel="prefetch" href="/assets/index.html-a5ae5696.js" as="script"><link rel="prefetch" href="/assets/index.html-c03cf046.js" as="script"><link rel="prefetch" href="/assets/index.html-8548109d.js" as="script"><link rel="prefetch" href="/assets/index.html-4e63526d.js" as="script"><link rel="prefetch" href="/assets/index.html-33c62ced.js" as="script"><link rel="prefetch" href="/assets/index.html-d5be8e8e.js" as="script"><link rel="prefetch" href="/assets/index.html-aec05774.js" as="script"><link rel="prefetch" href="/assets/index.html-eead4267.js" as="script"><link rel="prefetch" href="/assets/index.html-616978e7.js" as="script"><link rel="prefetch" href="/assets/index.html-a235fb87.js" as="script"><link rel="prefetch" href="/assets/index.html-fa6e4554.js" as="script"><link rel="prefetch" href="/assets/index.html-4c05233b.js" as="script"><link rel="prefetch" href="/assets/index.html-1594c0ab.js" as="script"><link rel="prefetch" href="/assets/index.html-42f38123.js" as="script"><link rel="prefetch" href="/assets/index.html-297c4a00.js" as="script"><link rel="prefetch" href="/assets/waline-meta-56fbc549.js" as="script"><link rel="prefetch" href="/assets/component-6a4c3c18.js" as="script"><link rel="prefetch" href="/assets/auto-712ff3ee.js" as="script"><link rel="prefetch" href="/assets/index-2bf332f6.js" as="script"><link rel="prefetch" href="/assets/flowchart-c441f34d.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-92a1991e.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-abe06b83.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-d7658707.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script"><link rel="prefetch" href="/assets/pageview-6c0641b6.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt="BlueSky的八股文"><!----><span class="vp-site-name hide-in-pad">BlueSky的八股文</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>Blog Home<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="文章"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>文章</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/java/Java%E5%9F%BA%E7%A1%80.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Java基础<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/Java%E9%9B%86%E5%90%88%E5%AE%B9%E5%99%A8.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Java集合容器<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/JVM.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>JVM<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/Linux.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Linux<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/MQ.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>MQ<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/MySQL.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>MySQL<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/Redis.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Redis<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link active" href="/java/Spring.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Spring<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%B9%B6%E5%8F%91.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>多线程与并发<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Java</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%B9%B6%E5%8F%91.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>多线程与并发<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/Java%E5%9F%BA%E7%A1%80.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Java基础<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/Java%E9%9B%86%E5%90%88%E5%AE%B9%E5%99%A8.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Java集合容器<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/JVM.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>JVM<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/Linux.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Linux<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/MQ.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>MQ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/MySQL.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>MySQL<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/Redis.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Redis<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/java/Spring.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Spring<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/Spring.html#ioc-aop"><!---->IOC/AOP<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/Spring.html#mvc"><!---->MVC<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/Spring.html#springboot"><!---->SpringBoot<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Spring</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://mister-hope.com" target="_blank" rel="noopener noreferrer">blueSky</a></span><span property="author" content="blueSky"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-08-08T00:00:00.000Z"></span><span class="page-pageview-info" aria-label="Page views🔢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/java/Spring.html">...</span></span><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 15 min</span><meta property="timeRequired" content="PT15M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category6 clickable" role="navigation">java</span><!--]--><meta property="articleSection" content="java"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag5 clickable" role="navigation">spring</span><span class="page-tag-item tag1 clickable" role="navigation">springboot</span><!--]--><meta property="keywords" content="spring,springboot"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#ioc-aop">IOC/AOP</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#mvc">MVC</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#springboot">SpringBoot</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="spring" tabindex="-1"><a class="header-anchor" href="#spring" aria-hidden="true">#</a> Spring</h1><h2 id="ioc-aop" tabindex="-1"><a class="header-anchor" href="#ioc-aop" aria-hidden="true">#</a> IOC/AOP</h2><ul><li><p>Spring的理解（IOC和AOP）</p><ul><li><p>首先，spring是个庞大的项目，从官网可以看到包括了：</p><ul><li>SpringFramework</li><li>SpringData</li><li>SpringSecurity</li><li>SpringBoot</li><li>SpringCloud</li></ul><p>当然，除了这些之外，Spring还包括很多其他的项目</p></li></ul><p>Spring最主要的有两个特点是IOC和AOP</p><ul><li>IOC: <ul><li>IOC就是控制反转，指的是创建对象控制权的转移，以前创建对象的时候都是自己控制，现在Spring容器会根据配置文件去帮我们创建和管理对象。</li><li>好处：解耦合，对象的属性只需要在配置文件中写，不用在java代码写，把属性与java代码解耦合。</li><li>原理：使用反射机制，根据配置文件信息去创建对象。使用了工厂的设计模式。</li><li>Spring的IOC有三种注入方式 ：构造器注入、setter方法注入、根据注解注入。</li></ul></li><li>AOP: <ul><li>把公共的代码提取出来，进行封装。</li><li>减少系统代码重复量，降低模块耦合度。</li><li>原理：基于动态代理 <ul><li>要代理的对象实现了接口，就用JDK动态代理生成代理类。</li><li>没有实现接口，就用cglib，实现子类的方式生成代理类。</li></ul></li></ul></li></ul></li><li><p>孙帅的IOC和DI</p><ul><li>IOC 控制反转 <ul><li>控制：对于成员变量赋值的控制权</li><li>控制反转：把成员变量赋值的控制权，从代码中反转到Spring工厂和配置文件中完成。</li><li>好处：解耦合</li><li>底层实现：反射加工厂设计模式</li></ul></li><li>DI 依赖注入 <ul><li>当一个类需要另一个类时，就意味着依赖，一旦出现了依赖，那么就可以把另一个类作为本类的成员变量，最终通过Spring配置文件注入。</li></ul></li></ul></li><li><p>类加载器的作用</p><ul><li>通过类加载器把对应class文件加载到JVM</li><li>通过类加载器创建类的Class对象，进而创建这个类的对象 <ul><li>User —&gt; user <ul><li>User类的Class对象 —&gt;new User() —&gt;user</li></ul></li></ul></li><li>如何获取类加载器：每一个.class文件，JVM会自动分配与之对应的ClassLoader</li></ul></li><li><p>代理创建3要素（孙帅）</p><ul><li>原始对象</li><li>额外功能</li><li>代理对象和原始对象实现相同的接口</li></ul></li><li><p>JDK动态代理 （孙帅）</p><ul><li>Proxy.newProxyInstance(classloader,interfacce,invocationhandler)</li><li>为什么JDK动态代理中，该api需要我们传入classloader？ <ul><li>创建代理类的对象需要用到类加载器</li><li>JDK动态代理没有相应的class文件，那么JVM就不会为其分配ClassLoader，所以需要我们为其指定classLoader（借用类加载器）。</li></ul></li></ul></li><li><p>Spring AOP和AspectJ 有什么区别？</p><ul><li>AOP是运行时增强，AspectJ是编译时增强。</li><li>AOP是动态代理方式实现，AspectJ是基于ASM修改字节码。</li><li>AspectJ性能比较好，切面多的话，用AspectJ</li></ul></li><li><p>Spring切面的五种通知类型</p><ul><li>before，前置通知，在方法调用前执行</li><li>after 方法执行后调用</li><li>around 之前之后都执行</li><li>after-returning 方法成功执行完成后执行</li><li>after-throwing 方法执行报错后执行</li></ul></li><li><p>Autowired和Resource关键字的区别？</p><ul><li>共同点： <ul><li>写在字段或者Setter方法上</li><li>都用于bean的注入</li></ul></li><li>不同点： <ul><li>Autowired是Spring 提供的注解，而@Resource是javax包的注解</li><li>Autowired 是ByType来装配对象，如果想ByName可以通过配合@Qualifer使用，而@Resource默认是根据ByName来装配，如果想改为ByType，使用type属性</li></ul></li></ul></li><li><p>Spring bean 的生命周期</p><ul><li>实例化bean：推断构造方法，实例化bean</li><li>设置对象属性（依赖注入）：实例化后的baen被封装到beanWrapper中，完成依赖注入</li><li>处理Aware接口： <ul><li>如果Bean实现了BeanNameAware接口，会调用setBeanName()方法</li><li>如果实现了BeanFactoryAware接口，调用setBeanFactory()方法</li></ul></li><li>BeanPostProcessor <ul><li>如果bean实现了BeanPostProcessor接口，那么会调用postprocessBeforeInitialization()</li></ul></li><li>初始化 <ul><li>如果Bean中的某个方法被@PostConstruct 标记，那么就去调用它</li><li>如果实现了InitializingBean，调用afterPropertiesSet方法</li><li>如果Bean 指定了init-method 方法，那么就去调用它。</li></ul></li><li>如果Bean实现了BeanPostProcessor接口，会调用postProcessAfterInitialization()</li><li>bean不再需要的时候，会被销毁，如果实现了disposableBean接口，那么就调用destory方法。</li></ul></li><li><p>bean的作用域</p><ul><li>singleton：默认，容器只有一个bean</li><li>prototype：每个请求创建一个bean</li><li>request：每个网络请求创建一个bean</li><li>session：每个session创建一个bean</li><li>global-session：global-session跟Portlet应用相关的</li></ul></li><li><p>Spring中单例bean是线程安全的吗</p><ul><li>关于单例bean的线程安全问题需要由开发者自己去控制，Spring并没有做线程安全方面的控制</li></ul></li><li><p>Spring 基于xml注入的方式有哪些</p><ul><li>Set方法注入</li><li>构造器注入</li></ul></li><li><p>Spring如何解决循环依赖问题（简单版本）</p><ul><li>对于普通Java对象，对象之间的依赖问题很好解决，比如X依赖Y，Y依赖X。 <ul><li>X x= new X(); x.setY ();</li><li>Y y=new Y();y.setX()</li></ul></li><li>由于Spring bean 有着复杂的生命周期，所以解决循环依赖问题也稍微麻烦一点，主要影响的是 <ul><li>实例化</li><li>填充属性</li><li>初始化</li></ul></li><li>Spring 使用了三级缓存来解决循环依赖的问题 <ul><li>singletonObjects 用于存放可以直接使用的单例bean</li><li>earlySingletonObjects 用于存放没填充属性的bean</li><li>singletonFactories 存放bean工厂</li></ul></li><li>对于对象A依赖B，对象B依赖A的情况 <ul><li>在对象A实例化后，会提前暴露到earlySingletonObjects</li><li>接着填充属性，发现此时依赖了B，发现没有B，走B的创建过程</li><li>B实例化后，填充属性，发现依赖了A，从earlySingletonObjects 中获取到了未填充属性的A，设置A，完成初始化后把自己放到singletonObjects里</li><li>返回A继续填充B，发现B已经在singletonObjects里面了，直接填充B</li><li>解决了循环依赖问题</li></ul></li><li>前面有提到三级缓存，三级缓存的作用是什么？ <ul><li>三级缓存是用来存储代理 Bean，当调用 getBean()方法时，发现目标 Bean 需要通过代理工厂来创建，此时会将创建好的实例保存到三级缓存，最终也会将赋值好的 Bean 同步到一级缓存中。</li></ul></li><li>Spring 中哪些情况下，不能解决循环依赖问题？ <ul><li>多例 Bean 通过 setter 注入的情况，不能解决循环依赖问题</li><li>构造器注入的 Bean 的情况，不能解决循环依赖问题</li><li>单例的代理 Bean 通过 Setter 注入的情况，不能解决循环依赖问题</li><li>设置了@DependsOn 的 Bean 的情况，不能解决循环依赖问</li></ul></li></ul></li><li><p>Spring的循环依赖（子路老师<a href="https://www.bilibili.com/video/BV1Ga4y1E7Br" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV1Ga4y1E7Br<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>）</p><ul><li>对于普通的Java对象的循环依赖问题，他们之间是很好解决的，比如X依赖Y，Y依赖X，这种是很好解决的： <ul><li>X x= new X(); x.setY ();</li><li>Y y=new Y();y.setX()</li></ul></li><li>Spring的循环依赖之所以复杂，是因为Spring Bean有着不同于普通Java对象的复杂生命周期，所以要讲一下Spring Bean的生命周期 <ul><li>首先Spring 容器启动后，他会去做一个扫描，扫描之后把他变成BeanDefinition存到一个BeanDefinitionMap中</li><li>然后对这个Map去遍历，并做验证，比如验证是否单例，是否懒加载，是否有depend on，是否抽象等等。</li><li>然后获取当前实例化的类有没有存在单例池中，有没有被提前暴露。如果没有被提前暴露的话，Spring Bean就会被开始创建。</li><li>通过推断构造方法，推断出一个最佳的构造方法，然后通过反射去实例化Java对象</li><li>判断是否做BeanDefinition的合并，Spring容器是否支持循环依赖，如果支持循环依赖的话，会提前暴露一个半成品的Bean到ObjectFactory，存到一个二级缓存Map中。</li><li>做一些属性填充</li><li>做一些Aware接口的回调，比如BeanNameAware，ApplicationContextAware，ClassLoaderAware等等。</li><li>如果实现了PostProcessor接口的话，就做初始化之前的方法回调。</li><li>然后做一些初始化的回调，@PostConstruct，InitializingBean，或者init-method方法。</li><li>如果实现了PostProcessor接口的话，就做初始化之后的方法回调。</li><li>这样的话，整个Spring Bean基本可以满足使用了。把这个Bean放入到单例池。</li></ul></li><li>Spring的循环依赖解决大概： <ul><li>实例化X的时候，首先对X做一些基本的验证，验证完之后，看一下X所对应的ObjectFactory有没有提前暴露，这种时候肯定是没有的 ，接着就推断构造方法。接着就把X实例化出来，X实例化出来就会提前暴露。接着就是X的属性填充，发现了需要填充Y。</li><li>发现Y并没有被实例化，走Y的生命周期过程，发现Y也没有提前暴露，继续走实例化Y，实例化Y后继续往下执行，把Y提前暴露。接着做Y的属性填充，发现需要填充X，但是X并没有在单例池中（X实例化只是走了一半）。</li><li>继续走X的生命周期流程，当走到去二级缓存中找的时候找到了-&gt;往Y中注入X的objectFactory对象-&gt;解决循环依赖。</li></ul></li></ul></li><li><p>Spring 实例化Bean推断构造方法</p><ul><li>如果@Autowired指定了构造方法，那么就使用该构造方法</li><li>如果没有指定 <ul><li>优先使用无参构造</li><li>如果没有无参构造方法，有两个及以上的构造方法，会报错</li></ul></li></ul></li><li><p>Spring事务实现方式</p><ul><li>编程事务</li><li>声明式事务@Transcation</li></ul></li><li><p>Spring事务的传播级别（7个）</p><ul><li>PROPAGATION_REQUIRED：默认的Spring事务传播级别，若当前存在事务就加入事务，没有就创建一个</li><li>PAOPAGATION_REQUIRE_NEW：不管有没有事务都新建一个，新老事务相互独立</li><li>PROPAGATION_SUPPORTS：当前存在事务，就加入其中，没有事务就不走事务</li><li>PROPAGATION_NOT_SUPPORTED：以非事务的方式运行，存在事务就先把事务挂起</li><li>PROPAGATION_MANDATORY：强制事务执行，若当前不存在，则抛出异常</li><li>PROPAGATION_NEVER: 以非事务的方式执行，如果当前存在事务，则抛出异常</li><li>PROPAGATION_NESTED：存在事务，嵌套其中，没有事务，创建一个</li></ul></li><li><p>Spring 事务失效的原因</p><ul><li>数据库存储引擎不支持事务</li><li>异常被捕获，没有抛出异常</li><li>异常类型错误，默认是RuntimeExcetion</li><li>注解所在的方法不是public</li><li>事务类没有被spring容器管理</li><li>事务属性配置不正确，propagation属性配置为不适用事务</li><li>数据源没有加载事务管理器</li><li>发生自调用的情况</li></ul></li><li><p>事务注解的本质原理是什么</p><ul><li>事务注解仅仅代表事务相关的元数据，在运行时被事务基础设施读取并消费，根据这些元数据来配置事务的行为。事务注解主要依赖于Spring AOP，使用了一个事务拦截器，在方法调用前后进行事务增强。</li></ul></li><li><p>Spring 框架中用到了哪些设计模式？</p><ul><li>工厂设计模式 : Spring 使用工厂模式通过 BeanFactory、ApplicationContext 创建 bean 对象。</li><li>代理设计模式 : Spring AOP 功能的实现。</li><li>单例设计模式 : Spring 中的 Bean 默认都是单例的。</li><li>原型模式：Spring Bean 如果配置了prototype模式的话，那么每次都会通过克隆的方式生成新对象。</li><li>模板方法模式 : Spring 中 jdbcTemplate、hibernateTemplate 等以 Template 结尾的对数据库操作的类，它们就使用到了模板模式。</li><li>观察者模式: Spring 中的 Event 和 Listener。 <ul><li>spring 事件：ApplicationEvent，该抽象类继承了EventObject 类，JDK 建议所有的事件都应该继承自 EventObject。 <ul><li>spring 事件监听器：ApplicationListener，该接口继承了 EventListener 接口，JDK 建议所有的事件监听器都应该继承EventListener。</li></ul></li></ul></li></ul></li><li><h2 id="beanpostprocessor与beanfactorypostprocessor的区别" tabindex="-1"><a class="header-anchor" href="#beanpostprocessor与beanfactorypostprocessor的区别" aria-hidden="true">#</a> BeanPostProcessor与BeanFactoryPostProcessor的区别</h2></li><li><p>说说Spring 中 ApplicationContext 和 BeanFactory 的区别</p><ul><li>BeanFactory是最原始的接口，提供了最基本的容器功能</li><li>ApplicationContext实现了BeanFactory 接口，对容器的功能做了进一步的扩展，比如 <ul><li>支持了国际化</li><li>支持事件发布与监听</li><li>支持读取环境变量</li></ul></li><li>ApplicationContext的初始化和BeanFactory有一个重大的区别:BeanFactory在初始化容器时，并未实例化Bean,直到第一次访问某个Bean时才实例目标Bean;而ApplicationContext则在初始化应用上下文时就实例化所有的单实例的Bean。因此ApplicationContext的初始化时间会比BeanFactory稍长一些。</li></ul></li><li><p>SpringIOC的启动流程</p><ul><li>IOC 是什么 <ul><li>IOC是控制反转，把对象的控制权转移到ioc容器。应用程序如果需要使用到某个对象实例，直接从 IOC 容器中去获取就行，这样设计的好处是降低了程序里面对象与对象之间的耦合性。</li></ul></li><li>Bean的声明方式 <ul><li>spring声明bean的方式有很多种，可以在xml配置，@Bean注解，@Component，@Service，@Repository等等。</li><li>Spring 在启动的时候会去扫描解析这些bean，然后保存到ioc容器中</li></ul></li><li>ioc的工作流程大致分为两个阶段 <ul><li>ioc的初始化 <ul><li>通过xml配置或者注解配置信息解析生成BeanDefiniton，注册到BeanDefinitonMap</li><li>遍历这个map，走bean的生命周期</li></ul></li><li>ioc容器的使用方式 <ul><li>通过@Autowired自动注入</li><li>通过BeanFactory.getBean() 获取IOC容器的bean</li></ul></li><li>另外，需要注意的是，对于那些指定lazy-init的bean，ioc容器启动的时候不会去实例化它，而是在第一次获取的时候去实例化它，而且ioc容器不会去管理这些bean</li></ul></li></ul></li><li><p>Spring常用的注解</p><ul><li>创建Bean的注解 <ul><li>@Configuration 配合@Bean</li><li>@Component</li><li>@Controller</li><li>@Service</li><li>@Repository</li></ul></li><li>注入属性 <ul><li>@Autowired</li><li>@Qualifier</li><li>@Resource</li><li>@Value</li></ul></li><li>作用域注解 <ul><li>@Scope</li></ul></li><li>配置类相关 <ul><li>@ComponentScan</li><li>@Import</li><li>@PropertySource 指定Properties文件的位置</li></ul></li></ul></li></ul><h2 id="mvc" tabindex="-1"><a class="header-anchor" href="#mvc" aria-hidden="true">#</a> MVC</h2><ul><li><p>SpringMVC的执行流程</p><ul><li>用户发送请求到前端控制器DispatcherServlet</li><li>前端控制器调用处理映射器HandlerMapping <ul><li>处理映射器根据配置信息生成处理器对象和拦截器对象返回给前端控制器</li></ul></li><li>前端控制器调用处理适配器HandlerAdapter <ul><li>HandlerAdapter经过适配后调用具体的Controller</li><li>Controller返回具体的ModleAndView</li><li>HandlerAdapter把ModelAndView返回给前端控制器</li></ul></li><li>前端控制器把ModelAndView返回给视图解析器 <ul><li>视图解析返回给具体View</li></ul></li><li>前端控制器根据View进行渲染</li></ul><figure><img src="https://secure2.wostatic.cn/static/t389U6kV2nvCArt4EQPNh1/image.png?auth_key=1691509920-opatE8GKiyj7AqtH68dKTc-0-7d4972e51e161611b5c79fefc349ef97" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></li></ul><h2 id="springboot" tabindex="-1"><a class="header-anchor" href="#springboot" aria-hidden="true">#</a> SpringBoot</h2><ul><li><p>为什么使用SpringBoot</p><ul><li>不像Spring一样有复杂的xml配置</li><li>内置Tomcat</li><li>有Starter，简化开发</li><li>最重要的是，自动配置</li></ul></li><li><p>SpringBoot的核心注解</p><ul><li><p>启动类上面的注解是@SpringBootApplication，它也是 Spring Boot 的核心注解，主要组合包含了以下 3 个注解：</p><p>@SpringBootConfiguration：组合了 @Configuration 注解，实现配置文件的功能。</p><p>@EnableAutoConfiguration：打开自动配置的功能，也可以关闭某个自动配置的选项，如关闭数据源自动配置功能： @SpringBootApplication(exclude ={DataSourceAutoConfiguration.class })。</p><p>@ComponentScan：Spring组件扫描。</p></li></ul></li><li><p>如何理解 Spring Boot 中的 Starter？</p><ul><li>Starter 是启动依赖，它的主要作用有几个: <ul><li>Starter 组件以功能为纬度，来维护对应功能的 jar 包的版本依赖，开发者只需要关心业务层，而无需过多关注版本冲突等问题。</li><li>Starter内部集成了自动装配机制，导入starter相关的jar包，那么这个组件相关的自动配置类会被Spring管理。</li></ul></li><li>Spring官方提供了很多Starter 组件，比如 Redis、 JPA、 MongoDB等等。还有一些第三方会维护一些Starter。官方提供的Starter和第三方提供的Starter主要区别在于命名上。 <ul><li>官方提供的Starter以spring-boot-starter 开头的前缀。</li><li>而第三方提供的Starter以spring-boot-starter 开头的后缀。</li></ul></li></ul></li><li><p>SpringBoot Starter工作原理</p><ul><li>SpringBoot启动的时候会干几件事： <ul><li>会找Starter包下的resources/META-INF/spring.factories文件，扫描配置文件的jar包</li><li>根据spring.factories配置加载AutoConfigure类</li><li>根据@Conditional注解条件，自动注入Bean到容器</li></ul></li></ul></li><li><p>如何自定义一个Stater</p><ul><li><a href="https://bbs.huaweicloud.com/blogs/272493" target="_blank" rel="noopener noreferrer">https://bbs.huaweicloud.com/blogs/272493<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>定义好需要通过配置类来实例化的Bean，XXXService</li><li>定义好属性类XXXProperties <ul><li>@ConfigurationProperties(prefix = &quot;&quot;)来绑定属性前缀</li></ul></li><li>定义好配置类， <ul><li>类名一般是XXXConfiguration</li><li>EnableConfigurationProperties(XXXProperties.class)</li><li>可以配合Conditional的子类来做条件控制</li></ul></li><li>定义好spring.factories属性文件</li><li>打包上传到本地仓库</li><li>其他项目引入我们自定义的starter模块</li></ul></li><li><p>自动配置原理</p><ul><li>启动类上有一个注解:@SpringBootApplication,他标明该类是一个SpringBoot的启动类，它内部是由3个核心注解组成： <ul><li>@SpringBootConfiguration ，底层还是@Configuration注解</li><li>@ComponentScan，扫描使用该注解的类下的包</li><li>@EnableAutoConfiguration 开启自动配置</li></ul></li><li>@EnableAutoConfiguration 点进去该注解，会发现有两个核心注解： <ul><li>@AutoConfigurationPackage 自动配置包 <ul><li>底层是@Import</li><li>默认情况下，将主配置类下的包及其子包里边的组件扫描到Spring容器中。</li><li>跟@ComponentScan有点像，不过他们扫描的类不同，比如加入了Spring Data JPA，@Entity这个注解就是由@AutoConfigurationPackage 扫描加载的。我们平时用到的@Controlelr，@Service，@Component，@Repository都是由@ComponentScan 扫描配置的。</li></ul></li><li>@Import(AutoConfigurationImportSelector.class) 给IOC容器导入组件 <ul><li>AutoConfigurationImportSelector.class 有getCandidateConfigurations方法，这个方法扫描META-INF/spring.factories 这个文件下所有配置类，将其包装成Properties对象，最后添加到Spring容器里</li></ul></li></ul></li></ul></li><li><p><a href="https://www.bilibili.com/video/BV1NY411P7VX" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV1NY411P7VX<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> springboot自动配置</p></li><li><p>springboot 自动配置</p></li></ul><figure><img src="https://secure2.wostatic.cn/static/qHwwyRnxwvqZkGqU6ADLyh/image.png?auth_key=1691509920-hGFpGTZ6vcxj6z7N25cf3U-0-57cc8a281fb55436b8d73df4ff5fb295" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://secure2.wostatic.cn/static/sRtkfPqFFH3g9T2ioKuVJ/image.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://secure2.wostatic.cn/static/cqQfYiUkACe4e4kyrRqh6a/image.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>在SpringBoot的Main方法中，调用了SpringApplication的run方法，底层的作用是 <ul><li>启动一个Context容器，</li><li>注册源配置类</li><li>递归加载和处理所有的配置类，加载那些被@ComponentScan和@Import标注的类</li></ul></li><li>而源配置类中，有一个@SpringBootApplication，表明是一个SpringBoot的启动类，他是一个由三个注解组成 <ul><li>SpringBootConfiguration，底层是一个@Configuration，表明是一个配置类</li><li>@ComponentScan 该注解具有组件扫描的功能</li><li>@EnableAutoConfiguration 表明开启自动配置功能 <ul><li>@AutoConfigurationPackage ,底层也是@Import注解，导入一个Register类</li><li>@Import(AutoConfigurationImportSelector.class) <ul><li>通过SpringFactories机制加载 spring-boot-autoconfigure-x.x.x.jar包里的spring.factories所配置的自动配置类</li><li>根据@Conditional过滤掉不必要的自动配置类</li></ul></li></ul></li></ul></li></ul></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/src/java/Spring.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="vp-link nav-link prev" href="/java/Redis.html"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Redis</div></a><!----></nav><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">NickName</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">E-Mail</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">Website</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="Write a comment here (Fill in the email address to receive an email notification when being replied)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>Preview:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="Emoji" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="GIF"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="Upload Image"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="Preview"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if-->  Words</div><button type="button" class="wl-btn">Login</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->Submit<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="Search GIF"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> Comments</div><ul class="wl-sort"><!--[--><li class="active">Latest</li><li class="">Oldest</li><li class="">Hottest</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.5</div></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Default footer</div><div class="vp-copyright">Copyright © 2023 blueSky</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-a0ba2b3f.js" defer></script>
  </body>
</html>
