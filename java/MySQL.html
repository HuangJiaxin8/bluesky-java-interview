<!doctype html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.66" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/java/MySQL.html"><meta property="og:site_name" content="BlueSky的八股文"><meta property="og:title" content="MySQL"><meta property="og:description" content="MySQL 基础 1. 数据库的三范式是什么？ 第一范式：列不可拆分，即原子性 第二范式：行记录唯一，即唯一性 第三范式：不可派生，即如果两个列通过计算可以得到第三列，那么不需要设置第三列。 备注：第三范式已经过时，有时候为了效率多设置一个列，可以牺牲第三范式，达到空间换时间的目的 2. MySQL 支持哪些存储引擎? 说说常见的innodb和myisam吧，说说他们的区别 区别： innodb支持事务、主键、外键，myisam不支持 innodb支持行级锁和表级锁，而myisam只支持表级锁 myisam内部有存储表行数的变量，而innodb没有 3. 超键、候选键、主键、外键分别是什么？ 不背 4. SQL 约束有哪几种？ NotNull，unique，主键，外键，check 5. MySQL 中的 varchar 和 char 有什么区别？ char是定长的字符，比如我们申请了char(10),无论插入多长数据都占用10个字符、 varchar是可变长的字符，数字代表的是最大字符数，实际占用是实际长度+1，最后一个字符记录的是字符长度 速度上看，char&gt;varchar。 6. MySQL中 in 和 exists 区别 暂时不背 7. drop、delete与truncate的区别 delete是DML语言，所以支持事务，drop和truncate是DDL语言，语句不支持事务 drop是删除整张表，truncate删除全部数据，不删除表结构，而delete可以删除部分数据。 速度上看，drop&gt;truncate&gt;delete 8. 什么是存储过程？有哪些优缺点？ 预编译的SQL语句 但不推荐使用，不好维护和迁移 9. MySQL 执行查询的过程 客户端TCP链接到连接器，这个阶段会做身份校验和资源分配 查缓存 语法分析，检查SQL语句是否写错了，表和表数据是否存在，别名是否有歧义等 优化，是否使用了索引 执行器执行，把结果集查询出来然后保存到缓存 MySQL常用的函数有哪些 avg()平均数 sum()总数 max()最大 min()最小 abs() 绝对值 concat('a','b') replace(str,old,new) 查询语句不同元素执行先后顺序？ where group by having select distinct order by limit count 性能哪种更好 count(*) = count(1) &gt; count(主键) &gt; count （字段） count(1) : 如果表里只有主键索引，没有二级索引时，那么，InnoDB 循环遍历聚簇索引。 如果有二级索引，就遍历二级索引。 count(*) 其实等于 count(0)，也就是说，当你使用 count(*) 时，MySQL 会将 * 参数转化为参数 0 来处理。 count(*) 执行过程跟 count(1) 执行过程基本一样的 count(主键) 如果表里只有主键索引，没有二级索引时，那么，InnoDB 循环遍历聚簇索引。 如果有二级索引，就遍历二级索引。 count(普通字段) 全表扫描，最慢 having和where 有什么区别 where是在结果集返回之前的过滤，having是在结果集返回之后的过滤。 having通常配合group by一起使用，用于分组后的过滤 where 不能使用聚合函数以及聚合函数的别名，having可以 select goods_category_id , avg(goods_price) as ag from sw_goods group by goods_category having ag &gt; 1000 select goods_category_id , avg(goods_price) as ag from sw_goods where ag&gt;1000 group by goods_category //报错！！因为from sw_goods 这张数据表里面没有ag这个字段 union 和 union all 有什么区别 union 对于重复的记录会去重，union all不会 union默认会按照字段的顺序排序，union all 不会 结论：UNION去重且排序，UNION ALL不去重不排序 left join ，right join，inner join的区别 left join 返回左表的所有记录和右边匹配到的记录 right join 返回右表的所有记录和左表匹配到的记录 inner join 返回左右两张表共同匹配的部分 TIMESTAMP 与 DATETIME 的区别 相同点： TIMESTAMP 列的显示格式与 DATETIME 列相同。格式为YYYY-MM-DD HH:MM:SS。 不同点： TIMESTAMP： 4个字节存储，时间范围：1970-01-01 08:00:01~2038-01-19 11:14:07 值以UTC格式保存，涉及时区转化，存储时对当前的时区进行转换，检索时再转换回当前的时区 DATETIME 8个字节存储，时间范围：1000-10-01 00:00:00~9999-12-31 23:59:59 实际格式存储，与时区无关"><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="article:author" content="blueSky"><meta property="article:tag" content="mysql"><meta property="article:tag" content="索引"><meta property="article:tag" content="sql优化"><meta property="article:published_time" content="2023-08-08T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"MySQL","image":[""],"datePublished":"2023-08-08T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"blueSky","url":"https://mister-hope.com"}]}</script><title>MySQL | BlueSky的八股文</title><meta name="description" content="MySQL 基础 1. 数据库的三范式是什么？ 第一范式：列不可拆分，即原子性 第二范式：行记录唯一，即唯一性 第三范式：不可派生，即如果两个列通过计算可以得到第三列，那么不需要设置第三列。 备注：第三范式已经过时，有时候为了效率多设置一个列，可以牺牲第三范式，达到空间换时间的目的 2. MySQL 支持哪些存储引擎? 说说常见的innodb和myisam吧，说说他们的区别 区别： innodb支持事务、主键、外键，myisam不支持 innodb支持行级锁和表级锁，而myisam只支持表级锁 myisam内部有存储表行数的变量，而innodb没有 3. 超键、候选键、主键、外键分别是什么？ 不背 4. SQL 约束有哪几种？ NotNull，unique，主键，外键，check 5. MySQL 中的 varchar 和 char 有什么区别？ char是定长的字符，比如我们申请了char(10),无论插入多长数据都占用10个字符、 varchar是可变长的字符，数字代表的是最大字符数，实际占用是实际长度+1，最后一个字符记录的是字符长度 速度上看，char&gt;varchar。 6. MySQL中 in 和 exists 区别 暂时不背 7. drop、delete与truncate的区别 delete是DML语言，所以支持事务，drop和truncate是DDL语言，语句不支持事务 drop是删除整张表，truncate删除全部数据，不删除表结构，而delete可以删除部分数据。 速度上看，drop&gt;truncate&gt;delete 8. 什么是存储过程？有哪些优缺点？ 预编译的SQL语句 但不推荐使用，不好维护和迁移 9. MySQL 执行查询的过程 客户端TCP链接到连接器，这个阶段会做身份校验和资源分配 查缓存 语法分析，检查SQL语句是否写错了，表和表数据是否存在，别名是否有歧义等 优化，是否使用了索引 执行器执行，把结果集查询出来然后保存到缓存 MySQL常用的函数有哪些 avg()平均数 sum()总数 max()最大 min()最小 abs() 绝对值 concat('a','b') replace(str,old,new) 查询语句不同元素执行先后顺序？ where group by having select distinct order by limit count 性能哪种更好 count(*) = count(1) &gt; count(主键) &gt; count （字段） count(1) : 如果表里只有主键索引，没有二级索引时，那么，InnoDB 循环遍历聚簇索引。 如果有二级索引，就遍历二级索引。 count(*) 其实等于 count(0)，也就是说，当你使用 count(*) 时，MySQL 会将 * 参数转化为参数 0 来处理。 count(*) 执行过程跟 count(1) 执行过程基本一样的 count(主键) 如果表里只有主键索引，没有二级索引时，那么，InnoDB 循环遍历聚簇索引。 如果有二级索引，就遍历二级索引。 count(普通字段) 全表扫描，最慢 having和where 有什么区别 where是在结果集返回之前的过滤，having是在结果集返回之后的过滤。 having通常配合group by一起使用，用于分组后的过滤 where 不能使用聚合函数以及聚合函数的别名，having可以 select goods_category_id , avg(goods_price) as ag from sw_goods group by goods_category having ag &gt; 1000 select goods_category_id , avg(goods_price) as ag from sw_goods where ag&gt;1000 group by goods_category //报错！！因为from sw_goods 这张数据表里面没有ag这个字段 union 和 union all 有什么区别 union 对于重复的记录会去重，union all不会 union默认会按照字段的顺序排序，union all 不会 结论：UNION去重且排序，UNION ALL不去重不排序 left join ，right join，inner join的区别 left join 返回左表的所有记录和右边匹配到的记录 right join 返回右表的所有记录和左表匹配到的记录 inner join 返回左右两张表共同匹配的部分 TIMESTAMP 与 DATETIME 的区别 相同点： TIMESTAMP 列的显示格式与 DATETIME 列相同。格式为YYYY-MM-DD HH:MM:SS。 不同点： TIMESTAMP： 4个字节存储，时间范围：1970-01-01 08:00:01~2038-01-19 11:14:07 值以UTC格式保存，涉及时区转化，存储时对当前的时区进行转换，检索时再转换回当前的时区 DATETIME 8个字节存储，时间范围：1000-10-01 00:00:00~9999-12-31 23:59:59 实际格式存储，与时区无关">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-1dd6ee92.css" as="style"><link rel="stylesheet" href="/assets/style-1dd6ee92.css">
    <link rel="modulepreload" href="/assets/app-a0ba2b3f.js"><link rel="modulepreload" href="/assets/MySQL.html-3012ac70.js"><link rel="modulepreload" href="/assets/MySQL.html-fc0954a2.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="prefetch" href="/assets/index.html-9e4e498c.js" as="script"><link rel="prefetch" href="/assets/Java基础.html-d26b0c06.js" as="script"><link rel="prefetch" href="/assets/Java集合容器.html-8f79902b.js" as="script"><link rel="prefetch" href="/assets/JVM.html-1909356c.js" as="script"><link rel="prefetch" href="/assets/Linux.html-e5d9d88d.js" as="script"><link rel="prefetch" href="/assets/mq.html-84615eb4.js" as="script"><link rel="prefetch" href="/assets/Redis.html-8ccf98f5.js" as="script"><link rel="prefetch" href="/assets/Spring.html-40ec4a50.js" as="script"><link rel="prefetch" href="/assets/多线程与并发.html-a5d441dd.js" as="script"><link rel="prefetch" href="/assets/404.html-90b8d879.js" as="script"><link rel="prefetch" href="/assets/index.html-cf72b280.js" as="script"><link rel="prefetch" href="/assets/index.html-731d885c.js" as="script"><link rel="prefetch" href="/assets/index.html-b5a32d80.js" as="script"><link rel="prefetch" href="/assets/index.html-e43c737d.js" as="script"><link rel="prefetch" href="/assets/index.html-62fb6734.js" as="script"><link rel="prefetch" href="/assets/index.html-2a4af82e.js" as="script"><link rel="prefetch" href="/assets/index.html-3ba1cbbc.js" as="script"><link rel="prefetch" href="/assets/index.html-7018d6bd.js" as="script"><link rel="prefetch" href="/assets/index.html-bdee41eb.js" as="script"><link rel="prefetch" href="/assets/index.html-2f4bf1bc.js" as="script"><link rel="prefetch" href="/assets/index.html-d25bd0f9.js" as="script"><link rel="prefetch" href="/assets/index.html-a4aa02bc.js" as="script"><link rel="prefetch" href="/assets/index.html-2ca22468.js" as="script"><link rel="prefetch" href="/assets/index.html-4f0e6172.js" as="script"><link rel="prefetch" href="/assets/index.html-562c2edc.js" as="script"><link rel="prefetch" href="/assets/index.html-60616476.js" as="script"><link rel="prefetch" href="/assets/index.html-36e023fb.js" as="script"><link rel="prefetch" href="/assets/index.html-6507fd83.js" as="script"><link rel="prefetch" href="/assets/index.html-649287d1.js" as="script"><link rel="prefetch" href="/assets/index.html-1a931a21.js" as="script"><link rel="prefetch" href="/assets/index.html-9a29c684.js" as="script"><link rel="prefetch" href="/assets/index.html-69995d16.js" as="script"><link rel="prefetch" href="/assets/index.html-8cd25fe6.js" as="script"><link rel="prefetch" href="/assets/Java基础.html-d30d048a.js" as="script"><link rel="prefetch" href="/assets/Java集合容器.html-64c299d4.js" as="script"><link rel="prefetch" href="/assets/JVM.html-c36d949e.js" as="script"><link rel="prefetch" href="/assets/Linux.html-e74b50e4.js" as="script"><link rel="prefetch" href="/assets/mq.html-bfa3c7bf.js" as="script"><link rel="prefetch" href="/assets/Redis.html-d0472e2f.js" as="script"><link rel="prefetch" href="/assets/Spring.html-88c0249a.js" as="script"><link rel="prefetch" href="/assets/多线程与并发.html-7b92520b.js" as="script"><link rel="prefetch" href="/assets/404.html-77c2b8d8.js" as="script"><link rel="prefetch" href="/assets/index.html-cb6a8dce.js" as="script"><link rel="prefetch" href="/assets/index.html-4d7901a4.js" as="script"><link rel="prefetch" href="/assets/index.html-28809eb8.js" as="script"><link rel="prefetch" href="/assets/index.html-023eaa39.js" as="script"><link rel="prefetch" href="/assets/index.html-127942ea.js" as="script"><link rel="prefetch" href="/assets/index.html-c19f9382.js" as="script"><link rel="prefetch" href="/assets/index.html-10f765f8.js" as="script"><link rel="prefetch" href="/assets/index.html-a5ae5696.js" as="script"><link rel="prefetch" href="/assets/index.html-c03cf046.js" as="script"><link rel="prefetch" href="/assets/index.html-8548109d.js" as="script"><link rel="prefetch" href="/assets/index.html-4e63526d.js" as="script"><link rel="prefetch" href="/assets/index.html-33c62ced.js" as="script"><link rel="prefetch" href="/assets/index.html-d5be8e8e.js" as="script"><link rel="prefetch" href="/assets/index.html-aec05774.js" as="script"><link rel="prefetch" href="/assets/index.html-eead4267.js" as="script"><link rel="prefetch" href="/assets/index.html-616978e7.js" as="script"><link rel="prefetch" href="/assets/index.html-a235fb87.js" as="script"><link rel="prefetch" href="/assets/index.html-fa6e4554.js" as="script"><link rel="prefetch" href="/assets/index.html-4c05233b.js" as="script"><link rel="prefetch" href="/assets/index.html-1594c0ab.js" as="script"><link rel="prefetch" href="/assets/index.html-42f38123.js" as="script"><link rel="prefetch" href="/assets/index.html-297c4a00.js" as="script"><link rel="prefetch" href="/assets/waline-meta-56fbc549.js" as="script"><link rel="prefetch" href="/assets/component-6a4c3c18.js" as="script"><link rel="prefetch" href="/assets/auto-712ff3ee.js" as="script"><link rel="prefetch" href="/assets/index-2bf332f6.js" as="script"><link rel="prefetch" href="/assets/flowchart-c441f34d.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-92a1991e.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-abe06b83.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-d7658707.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script"><link rel="prefetch" href="/assets/pageview-6c0641b6.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/logo.svg" alt="BlueSky的八股文"><!----><span class="vp-site-name hide-in-pad">BlueSky的八股文</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>Blog Home<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="文章"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>文章</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/java/Java%E5%9F%BA%E7%A1%80.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Java基础<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/Java%E9%9B%86%E5%90%88%E5%AE%B9%E5%99%A8.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Java集合容器<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/JVM.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>JVM<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/Linux.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Linux<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/MQ.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>MQ<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link active" href="/java/MySQL.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>MySQL<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/Redis.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Redis<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/Spring.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Spring<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%B9%B6%E5%8F%91.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>多线程与并发<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/vuepress-theme-hope/vuepress-theme-hope" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Java</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%B9%B6%E5%8F%91.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>多线程与并发<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/Java%E5%9F%BA%E7%A1%80.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Java基础<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/Java%E9%9B%86%E5%90%88%E5%AE%B9%E5%99%A8.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Java集合容器<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/JVM.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>JVM<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/Linux.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Linux<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/MQ.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>MQ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/java/MySQL.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>MySQL<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#基础"><!---->基础<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#索引"><!---->索引<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#数据库事务"><!---->数据库事务<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#日志文件"><!---->日志文件<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#事务隔离级别"><!---->事务隔离级别<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#锁"><!---->锁<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#sql调优"><!---->SQL调优<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#分库分表"><!---->分库分表<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#主从复制"><!---->主从复制<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#mysql架构"><!---->MySQL架构<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/java/MySQL.html#数据库连接池"><!---->数据库连接池<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/Redis.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Redis<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/java/Spring.html"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>Spring<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>MySQL</h1><div class="page-info"><span class="page-author-info" aria-label="Author🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://mister-hope.com" target="_blank" rel="noopener noreferrer">blueSky</a></span><span property="author" content="blueSky"></span></span><!----><span class="page-date-info" aria-label="Writing Date📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-08-08T00:00:00.000Z"></span><span class="page-pageview-info" aria-label="Page views🔢" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon eye-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="eye icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z"></path></svg><span id="ArtalkPV" class="waline-pageview-count" data-path="/java/MySQL.html">...</span></span><span class="page-reading-time-info" aria-label="Reading Time⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 28 min</span><meta property="timeRequired" content="PT28M"></span><span class="page-category-info" aria-label="Category🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category6 clickable" role="navigation">java</span><!--]--><meta property="articleSection" content="java"></span><span class="page-tag-info" aria-label="Tag🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag4 clickable" role="navigation">mysql</span><span class="page-tag-item tag3 clickable" role="navigation">索引</span><span class="page-tag-item tag8 clickable" role="navigation">sql优化</span><!--]--><meta property="keywords" content="mysql,索引,sql优化"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#基础">基础</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#索引">索引</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#数据库事务">数据库事务</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#日志文件">日志文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#事务隔离级别">事务隔离级别</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#锁">锁</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#sql调优">SQL调优</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#分库分表">分库分表</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#主从复制">主从复制</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#mysql架构">MySQL架构</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#数据库连接池">数据库连接池</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql" aria-hidden="true">#</a> MySQL</h1><h2 id="基础" tabindex="-1"><a class="header-anchor" href="#基础" aria-hidden="true">#</a> 基础</h2><ul><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_1-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%89%E8%8C%83%E5%BC%8F%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F" target="_blank" rel="noopener noreferrer">1. 数据库的三范式是什么？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>第一范式：列不可拆分，即原子性</li><li>第二范式：行记录唯一，即唯一性</li><li>第三范式：不可派生，即如果两个列通过计算可以得到第三列，那么不需要设置第三列。</li><li>备注：第三范式已经过时，有时候为了效率多设置一个列，可以牺牲第三范式，达到空间换时间的目的</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_2-mysql-%E6%94%AF%E6%8C%81%E5%93%AA%E4%BA%9B%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E" target="_blank" rel="noopener noreferrer">2. MySQL 支持哪些存储引擎?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>说说常见的innodb和myisam吧，说说他们的区别</li><li>区别： <ul><li>innodb支持事务、主键、外键，myisam不支持</li><li>innodb支持行级锁和表级锁，而myisam只支持表级锁</li><li>myisam内部有存储表行数的变量，而innodb没有</li></ul></li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_3-%E8%B6%85%E9%94%AE%E3%80%81%E5%80%99%E9%80%89%E9%94%AE%E3%80%81%E4%B8%BB%E9%94%AE%E3%80%81%E5%A4%96%E9%94%AE%E5%88%86%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F" target="_blank" rel="noopener noreferrer">3. 超键、候选键、主键、外键分别是什么？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>不背</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_4-sql-%E7%BA%A6%E6%9D%9F%E6%9C%89%E5%93%AA%E5%87%A0%E7%A7%8D%EF%BC%9F" target="_blank" rel="noopener noreferrer">4. SQL 约束有哪几种？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>NotNull，unique，主键，外键，check</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_5-mysql-%E4%B8%AD%E7%9A%84-varchar-%E5%92%8C-char-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F" target="_blank" rel="noopener noreferrer">5. MySQL 中的 varchar 和 char 有什么区别？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>char是定长的字符，比如我们申请了char(10),无论插入多长数据都占用10个字符、</li><li>varchar是可变长的字符，数字代表的是最大字符数，实际占用是实际长度+1，最后一个字符记录的是字符长度</li><li>速度上看，char&gt;varchar。</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_6-mysql%E4%B8%AD-in-%E5%92%8C-exists-%E5%8C%BA%E5%88%AB" target="_blank" rel="noopener noreferrer">6. MySQL中 in 和 exists 区别<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>暂时不背</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_7-drop%E3%80%81delete%E4%B8%8Etruncate%E7%9A%84%E5%8C%BA%E5%88%AB" target="_blank" rel="noopener noreferrer">7. drop、delete与truncate的区别<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>delete是DML语言，所以支持事务，drop和truncate是DDL语言，语句不支持事务</li><li>drop是删除整张表，truncate删除全部数据，不删除表结构，而delete可以删除部分数据。</li><li>速度上看，drop&gt;truncate&gt;delete</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_8-%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%EF%BC%9F%E6%9C%89%E5%93%AA%E4%BA%9B%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9F" target="_blank" rel="noopener noreferrer">8. 什么是存储过程？有哪些优缺点？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>预编译的SQL语句</li><li>但不推荐使用，不好维护和迁移</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_9-mysql-%E6%89%A7%E8%A1%8C%E6%9F%A5%E8%AF%A2%E7%9A%84%E8%BF%87%E7%A8%8B" target="_blank" rel="noopener noreferrer">9. MySQL 执行查询的过程<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>客户端TCP链接到连接器，这个阶段会做身份校验和资源分配</li><li>查缓存</li><li>语法分析，检查SQL语句是否写错了，表和表数据是否存在，别名是否有歧义等</li><li>优化，是否使用了索引</li><li>执行器执行，把结果集查询出来然后保存到缓存</li></ul></li><li><ol start="10"><li>MySQL常用的函数有哪些</li></ol><ul><li>avg()平均数</li><li>sum()总数</li><li>max()最大</li><li>min()最小</li><li>abs() 绝对值</li><li>concat(&#39;a&#39;,&#39;b&#39;)</li><li>replace(str,old,new)</li></ul></li><li><p>查询语句不同元素执行先后顺序？</p><ul><li>where</li><li>group by</li><li>having</li><li>select</li><li>distinct</li><li>order by</li><li>limit</li></ul></li><li><p>count 性能哪种更好</p><ul><li>count(*) = count(1) &gt; count(主键) &gt; count （字段）</li><li>count(1) : <ul><li>如果表里只有主键索引，没有二级索引时，那么，InnoDB 循环遍历聚簇索引。</li><li>如果有二级索引，就遍历二级索引。</li></ul></li><li>count(<code>*</code>) <ul><li>其实等于 count(<code>0</code>)，也就是说，当你使用 count(<code>*</code>) 时，MySQL 会将 <code>*</code> 参数转化为参数 0 来处理。</li><li>count(*) 执行过程跟 count(1) 执行过程基本一样的</li></ul></li><li>count(主键) <ul><li>如果表里只有主键索引，没有二级索引时，那么，InnoDB 循环遍历聚簇索引。</li><li>如果有二级索引，就遍历二级索引。</li></ul></li><li>count(普通字段) <ul><li>全表扫描，最慢</li></ul></li></ul></li><li><p>having和where 有什么区别</p><ul><li>where是在结果集返回之前的过滤，having是在结果集返回之后的过滤。</li><li>having通常配合group by一起使用，用于分组后的过滤</li><li>where 不能使用聚合函数以及聚合函数的别名，having可以 <ul><li>select goods_category_id , avg(goods_price) as ag from sw_goods group by goods_category having ag &gt; 1000</li><li>select goods_category_id , avg(goods_price) as ag from sw_goods where ag&gt;1000 group by goods_category //报错！！因为from sw_goods 这张数据表里面没有ag这个字段</li></ul></li></ul></li><li><p>union 和 union all 有什么区别</p><ul><li>union 对于重复的记录会去重，union all不会</li><li>union默认会按照字段的顺序排序，union all 不会</li><li>结论：UNION去重且排序，UNION ALL不去重不排序</li></ul></li><li><p>left join ，right join，inner join的区别</p><ul><li>left join 返回左表的所有记录和右边匹配到的记录</li><li>right join 返回右表的所有记录和左表匹配到的记录</li><li>inner join 返回左右两张表共同匹配的部分</li></ul></li><li><p>TIMESTAMP 与 DATETIME 的区别</p><ul><li>相同点： <ul><li>TIMESTAMP 列的显示格式与 DATETIME 列相同。格式为YYYY-MM-DD HH:MM:SS。</li></ul></li><li>不同点： <ul><li>TIMESTAMP： <ul><li>4个字节存储，时间范围：1970-01-01 08:00:01~2038-01-19 11:14:07</li><li>值以UTC格式保存，涉及时区转化，存储时对当前的时区进行转换，检索时再转换回当前的时区</li></ul></li><li>DATETIME <ul><li>8个字节存储，时间范围：1000-10-01 00:00:00~9999-12-31 23:59:59</li><li>实际格式存储，与时区无关</li></ul></li></ul></li></ul></li></ul><h2 id="索引" tabindex="-1"><a class="header-anchor" href="#索引" aria-hidden="true">#</a> 索引</h2><ul><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_1-%E7%B4%A2%E5%BC%95%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F" target="_blank" rel="noopener noreferrer">1. 索引是什么？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>一种能方便我们加快查询速度的数据结构 ，底层采用的是b+树</li><li>是一个文件，占据物理空间</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_2-%E7%B4%A2%E5%BC%95%E6%9C%89%E5%93%AA%E4%BA%9B%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9F" target="_blank" rel="noopener noreferrer">2. 索引有哪些优缺点？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>优点：加快查询速度</li><li>缺点： <ul><li>每次表增删改，都要重新建立索引，耗时</li><li>占用物理空间</li></ul></li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_3-mysql%E6%9C%89%E5%93%AA%E5%87%A0%E7%A7%8D%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B%EF%BC%9F" target="_blank" rel="noopener noreferrer">3. MySQL有哪几种索引类型？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>普通索引</li><li>唯一索引</li><li>联合索引</li><li>聚簇索引</li><li>非聚簇索引</li><li>全文索引</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_4-%E8%AF%B4%E4%B8%80%E8%AF%B4%E7%B4%A2%E5%BC%95%E7%9A%84%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%EF%BC%9F" target="_blank" rel="noopener noreferrer">4. 说一说索引的底层实现？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>说我们常见的B+树索引吧</li><li>B+树数据都在叶子节点上，并且增加了顺序访问指针，每个叶子节点都指向相邻的叶子节点的地址。</li><li>进行范围查找时只需要查找两个节点，进行遍历即可。</li></ul></li><li><p>B树和B+树的区别</p><ul><li>B树内部节点和叶子节点都存放数据，而B+树内部节点存放的是key值，叶子节点才存放数据</li><li>B+树叶子节点有顺序访问指针，B树没有</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_5-%E4%B8%BA%E4%BB%80%E4%B9%88%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84%E9%BB%98%E8%AE%A4%E4%BD%BF%E7%94%A8btree%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AFb-tree%EF%BC%8Chash%EF%BC%8C%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%8C%E7%BA%A2%E9%BB%91%E6%A0%91%EF%BC%9F" target="_blank" rel="noopener noreferrer">5. 为什么索引结构默认使用B+Tree，而不是B-Tree，Hash，二叉树，红黑树？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>不是BTree： <ul><li>B+树 高度低，比较矮胖，能够减少IO</li><li>数据都存在叶子节点，方便扫库，适用于范围查询。B树分支节点都存储数据，每次扫库的时候都要通过中序遍历来扫。</li></ul></li><li>Hash： <ul><li>没有顺序，天然不支持范围查询</li><li>更适用于等值运算</li><li>重复数据多，哈希碰撞严重，效率会很低</li></ul></li><li>二叉树： <ul><li>树高度不平衡，不能自平衡，IO代价高</li></ul></li><li>红黑树： <ul><li>高度随数据量的增加而增加，IO代价高</li></ul></li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_6-%E8%AE%B2%E4%B8%80%E8%AE%B2%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E4%B8%8E%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%EF%BC%9F" target="_blank" rel="noopener noreferrer">6. 讲一讲聚簇索引与非聚簇索引？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li><a href="https://juejin.cn/post/6844903845554814983" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6844903845554814983<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_7-%E9%9D%9E%E8%81%9A%E7%B0%87%E7%B4%A2%E5%BC%95%E4%B8%80%E5%AE%9A%E4%BC%9A%E5%9B%9E%E8%A1%A8%E6%9F%A5%E8%AF%A2%E5%90%97%EF%BC%9F" target="_blank" rel="noopener noreferrer">7. 非聚簇索引一定会回表查询吗？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>不一定，如果是覆盖索引就不会回表查询</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_8-%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95%E4%B8%AD%E7%9A%84%E9%A1%BA%E5%BA%8F%EF%BC%9F" target="_blank" rel="noopener noreferrer">8. 联合索引是什么？为什么需要注意联合索引中的顺序？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>联合索引(A,B,C),按A排序，A相等，按B排序，B相等，按C排序</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_9-%E8%AE%B2%E4%B8%80%E8%AE%B2mysql%E7%9A%84%E6%9C%80%E5%B7%A6%E5%89%8D%E7%BC%80%E5%8E%9F%E5%88%99" target="_blank" rel="noopener noreferrer">9. 讲一讲MySQL的最左前缀原则?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>举例子</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_10-%E8%AE%B2%E4%B8%80%E8%AE%B2%E5%89%8D%E7%BC%80%E7%B4%A2%E5%BC%95%EF%BC%9F" target="_blank" rel="noopener noreferrer">10. 讲一讲前缀索引？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>有些字段非常长，但是想建立索引，我们可以提取公共部分作为索引，这样速度会快很多</li><li>但是，我们需要注意，order by不支持前缀索引 。</li><li>步骤： <ul><li>先计算完整列的选择性</li><li>再计算不同前缀长度的选择性</li><li>找到最优长度之后，创建前缀索引</li></ul></li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_11-%E4%BA%86%E8%A7%A3%E7%B4%A2%E5%BC%95%E4%B8%8B%E6%8E%A8%E5%90%97%EF%BC%9F" target="_blank" rel="noopener noreferrer">11. 了解索引下推吗？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://zhuanlan.zhihu.com/p/121084592" target="_blank" rel="noopener noreferrer">Mysql性能优化：什么是索引下推？ - 知乎 (zhihu.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://www.cnblogs.com/three-fighter/p/15246577.html" target="_blank" rel="noopener noreferrer">五分钟搞懂MySQL索引下推 - 三分恶 - 博客园 (cnblogs.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>举个例子，有个user表，字段id，name，age，address。该表有个复合索引(name,age)</li><li>有个sql语句：select * from user where name like 陈% and age =20 ，</li><li>没有索引下推的时候，会先查找非聚簇索引，查出符合 陈开头的所有索引行，然后再去查聚簇索引的所有数据，然后再过滤掉age 不等于20的数据</li><li>开启索引下推的时候，查找非聚簇索引，查出陈开头的所有行，然后继续判断该索引有没有age的字段，有的话，继续过滤掉age不等于20的索引行。然后再去查聚簇索引的数据。</li><li>5.6引入了索引下推，默认开启，可以通过配置关闭</li><li>优点： <ul><li>可以减少回表次数</li><li>在innodb只针对二级索引有效</li></ul></li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_12-%E6%80%8E%E4%B9%88%E6%9F%A5%E7%9C%8Bmysql%E8%AF%AD%E5%8F%A5%E6%9C%89%E6%B2%A1%E6%9C%89%E7%94%A8%E5%88%B0%E7%B4%A2%E5%BC%95%EF%BC%9F" target="_blank" rel="noopener noreferrer">12. 怎么查看MySQL语句有没有用到索引？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>explain语句</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_13-%E4%B8%BA%E4%BB%80%E4%B9%88%E5%AE%98%E6%96%B9%E5%BB%BA%E8%AE%AE%E4%BD%BF%E7%94%A8%E8%87%AA%E5%A2%9E%E9%95%BF%E4%B8%BB%E9%94%AE%E4%BD%9C%E4%B8%BA%E7%B4%A2%E5%BC%95%EF%BC%9F" target="_blank" rel="noopener noreferrer">13. 为什么官方建议使用自增长主键作为索引？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>减少B+树的分裂和移动的频率。</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_14-%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%EF%BC%9F" target="_blank" rel="noopener noreferrer">14. 如何创建索引？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>建表语句</li><li>alter table 命令</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_15-%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E6%97%B6%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E4%BB%80%E4%B9%88%EF%BC%9F" target="_blank" rel="noopener noreferrer">15. 创建索引时需要注意什么？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>非空字段：应该指定列为NOT NULL，提高效率</li><li>取值离散大的字段</li><li>索引字段越小越好</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_16-%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E5%8E%9F%E5%88%99%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F" target="_blank" rel="noopener noreferrer">16. 建索引的原则有哪些？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>最左匹配原则，其中=和in可以乱序</li><li>尽量使用区分度高的列作为索引</li><li>索引列不要参与计算</li><li>尽量扩展索引不要新增索引</li><li>非空字段指定为NOT NULL约束</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_17-%E4%BD%BF%E7%94%A8%E7%B4%A2%E5%BC%95%E6%9F%A5%E8%AF%A2%E4%B8%80%E5%AE%9A%E8%83%BD%E6%8F%90%E9%AB%98%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%80%A7%E8%83%BD%E5%90%97%EF%BC%9F" target="_blank" rel="noopener noreferrer">17. 使用索引查询一定能提高查询的性能吗？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_18-%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E4%B8%8D%E8%B5%B0%E7%B4%A2%E5%BC%95%EF%BC%88%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%EF%BC%89%EF%BC%9F" target="_blank" rel="noopener noreferrer">18. 什么情况下不走索引（索引失效）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>！ = 和&lt;&gt; 、or，not in 、not exists、 函数、操作运算符</li><li>类型不一致，发生隐式转换</li><li>模糊索引%和复合索引没有遵守最左匹配</li></ul></li><li><ol start="19"><li>主键与索引有什么区别？null值，约束，唯一</li></ol><ul><li>主键一定会创建一个唯一索引</li><li>主键不允许null值，但是唯一索引可以</li><li>主键是一种约束，唯一索引是一种索引</li><li>一个表只有一个主键，但是可以多个唯一索引</li></ul></li><li><p>复合索引范围查询右边失效</p><ul><li>mysql中索引底层是B+树，它的叶子节点是有序的，而单列索引中，可以很好的排序。</li><li>而联合索引中，他是怎么排序的呢？比如联合索引（A,B）,B会依赖于A进行排序，如果如果A进行了范围查询，那么B字段没办法依赖A的排序，导致B无序了。那么它就不能用二分查找法查找到b的值了。</li></ul></li><li><p>MySQL的聚簇索引和非聚簇索引</p><ul><li>MySQL的索引是跟存储引擎是相关的 <ul><li>innodb中索引跟数据都放在idb文件中</li><li>myisam的索引放在myi中，数据文件放到myd文件中</li></ul></li><li>innodb插入数据的时候 <ul><li>会跟主键索引放到一起，是聚簇索引。</li><li>其他索引只是存放主键的位置，通过主键的位置去查找数据。</li></ul></li></ul></li><li><p>MySQL的聚簇索引和非聚簇索引</p><ul><li>聚集索引就是基于主键创建的索引，除了主键，其他索引都叫非聚集索引，也叫二级索引</li><li>因为在innodb引擎中，一张表的数据对应的物理文件，本身就是按照B+树来组织的，而聚集索引就是按照每张表的组件来构建这样一个B+树，然后叶子节点存储了这个表里面的每一行数据记录。</li><li>所以基于Innodb这样的一个特征，聚集索引并不仅仅是一种索引类型，还代表了一种数据的存储方式，同时也意味着表里必须要有一个主键，如果没有，MySQL会默认给一个隐藏列作为主键。</li><li>非聚集索引来查询一条数据的时候，由于不存放数据，最终还是要对聚集索引来检索。</li></ul></li><li><p>innodb里面只能存在一个聚集索引</p><ul><li>如果存在多个聚集索引，那么意味着表里面数据会存在多个副本，造成磁盘空间的浪费</li></ul></li><li><p>索引设计原则</p><ul><li>给查询的列加上索引</li><li>表的量小就别加索引</li><li>频繁增删改的字段就别加索引</li><li>索引的字段长度越短越好，比如可以用前缀索引</li><li>创建索引的列不要太多，可以用组合索引</li><li>大文本、大对象不要创建索引</li></ul></li><li><p>MySQL 普通索引和唯一索引哪个读写性能高一点</p><ul><li>读性能：唯一索引略快，因为是唯一的，读到一个直接返回。</li><li>写性能：唯一索引略慢，因为写入的时候需要保证唯一性，需要额外的性能消耗。</li></ul></li><li><p>b+树 三层 最多存多少数据</p><ul><li>1170 * 1170 * 16 = 21902400</li><li><a href="https://zhuanlan.zhihu.com/p/379092178" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/379092178<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li></ul><h2 id="数据库事务" tabindex="-1"><a class="header-anchor" href="#数据库事务" aria-hidden="true">#</a> 数据库事务</h2><ul><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1%EF%BC%9F" target="_blank" rel="noopener noreferrer">1. 什么是数据库事务？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>不可分割的数据库操作序列，数据库并发控制的基本单位，执行结果必须是一种一致性到另一种一致性</li><li>多条sql语句要么一起成功要么一起失败</li><li>举例：转账</li></ul></li><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_2-%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%E4%BA%8B%E5%8A%A1%E5%85%B7%E6%9C%89%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%89%B9%E5%BE%81" target="_blank" rel="noopener noreferrer">2. 介绍一下事务具有的四个特征<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>A：atomicity 原子性，同一事务要么成功要么不成功</li><li>C：consistency 一致性，事务一提交成功，数据库就要处于一致性状态</li><li>I ：isolation隔离性 ，不同事务之间相互隔离不影响</li><li>D：durability 持久性，事务一旦成功，数据的改变就应该是永久的</li></ul></li><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_4-%E4%BB%80%E4%B9%88%E6%98%AF%E8%84%8F%E8%AF%BB%EF%BC%9F%E5%B9%BB%E8%AF%BB%EF%BC%9F%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB%EF%BC%9F" target="_blank" rel="noopener noreferrer">4. 什么是脏读？幻读？不可重复读？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>脏读：事务A读到了事务B的数据，然后事务B回滚，那么A读到的就是脏数据。</li><li>不可重复读：事务A多次读取同一数据，事务B对在事务A多次读取过程中，对数据进行修改，导致事务A读取到的数据不一致</li><li>幻读：跟不可重复度类似，不过不可重复读针对的是数据的修改，幻读针对的是数据行的增加删除。</li></ul></li><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_5-%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" target="_blank" rel="noopener noreferrer">5. 事务的实现原理<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>基于redo log（重做日志）和undo log（回滚日志）实现</li><li>每提交一个事务必须先将该事务的所有日志写入到重做日志文件进行持久化，数据库就可以通过重做日志来保证事务的原子性和持久性。</li><li>每当有修改事务时，还会产生 undo log，如果需要回滚，则根据 undo log 的反向语句进行逻辑操作，比如 insert 一条记录就 delete 一条记录。undo log 主要实现数据库的一致性。</li></ul></li><li>MySQL 的事务 ACID 是通过什么方式实现的 <ul><li>原子性是通过undo log 实现的，需要回滚的时候，撤销执行成功的SQL</li><li>一致性是由其他三大特性解决的</li><li>隔离性是通过MVCC控制的</li><li>持久性是通过redo log保证的，mysql修改数据的时候会在redo log记录一份日志，就算数据没有保存，日志保存成功，数据也不会丢失</li></ul></li><li>MySQL 如何实现原子性 <ul><li>原子性是通过undo log实现，undo log 也叫回滚日志，但需要回滚的时候，那么就可以把undo log里面的语句记录做一下反向操作就行了。 <ul><li>比如，insert 一条语句就delete 一条语句；update新值就update旧值。</li></ul></li></ul></li></ul><h2 id="日志文件" tabindex="-1"><a class="header-anchor" href="#日志文件" aria-hidden="true">#</a> 日志文件</h2><ul><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_6-mysql%E4%BA%8B%E5%8A%A1%E6%97%A5%E5%BF%97%E4%BB%8B%E7%BB%8D%E4%B8%8B%EF%BC%9F" target="_blank" rel="noopener noreferrer">6. MySQL事务日志介绍下？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>redo log <ul><li>事务执行过程中，就会把日志记录到里面。如果某个时间点mysql宕机了，那么重启后，mysql会根据redo log 重做未落盘的部分。保证了事务的持久性。</li></ul></li><li>undo log <ul><li>undo log 记录事务的上一个版本记录，用于MVCC的实现，保证了事务的隔离性。</li></ul></li></ul></li><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_7-%E4%BB%80%E4%B9%88%E6%98%AFmysql%E7%9A%84-binlog%EF%BC%9F" target="_blank" rel="noopener noreferrer">7. 什么是MySQL的 binlog？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>(用于主从复制) <ul><li>bin log记录的是表结构和表数据变化，不会记录select和show的语句。</li><li>事件形式记录，包含语句所耗时，主要目的复制和恢复。</li><li>binlog有三种格式： <ul><li>statement 基于SQL语句</li><li>row 基于行，记录的是行变化</li><li>mixed 混合模式，根据情况来选择statement还是row</li></ul></li></ul></li><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_8-%E5%9C%A8%E4%BA%8B%E5%8A%A1%E4%B8%AD%E5%8F%AF%E4%BB%A5%E6%B7%B7%E5%90%88%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E5%90%97%EF%BC%9F" target="_blank" rel="noopener noreferrer"><strong>8. 在事务中可以混合使用存储引擎吗？</strong><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>尽量不要同一个事务使用到不同的存储引擎</li><li>如果一个事务中使用了事务型和非事务型的表，那么事务正常提交没有问题</li><li>但是要是事务发生回滚，会导致事务型的表回滚了，非事务型的表没有回滚，导致数据库处于不一致状态</li></ul></li><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_9-mysql%E4%B8%AD%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%9A%84" target="_blank" rel="noopener noreferrer">9. MySQL中是如何实现事务隔离的?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>本来可以选择是串行化的隔离级别，这样就不会有幻读问题，但是这种隔离级别相当于单线程，效率低。</li><li>MySQL使用了可重复读，通过行锁+间隙锁的组合next-key实现，解决了幻读问题。</li></ul></li><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_10-%E4%BB%80%E4%B9%88%E6%98%AF-mvcc%EF%BC%9F" target="_blank" rel="noopener noreferrer">10. 什么是 MVCC？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>MVCC多版本并发控制。</li><li>MVCC 的目的为了解决读写冲突，提高Mysql的并发性能。</li><li>保证了事务的隔离性。</li></ul></li><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_11-mvcc-%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86" target="_blank" rel="noopener noreferrer">11. MVCC 的实现原理<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>InnoDB 每一行数据都有一个隐藏的回滚指针，指向上一个历史版本，这个历史版本存放在 undo log 中。</li><li>一个事务在执行更新操作时，其它事务此时需要查询时，会查询上一个历史版本记录。这样保证了读写不冲突，提高了Mysql并发性能。</li></ul></li></ul><h2 id="事务隔离级别" tabindex="-1"><a class="header-anchor" href="#事务隔离级别" aria-hidden="true">#</a> 事务隔离级别</h2><ul><li><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_3-%E8%AF%B4%E4%B8%80%E4%B8%8Bmysql-%E7%9A%84%E5%9B%9B%E7%A7%8D%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB" target="_blank" rel="noopener noreferrer">3. 说一下MySQL 的四种隔离级别<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><ul><li>读未提交：会产生 脏读、不可重复读、幻读</li><li>读已提交：会产生 不可重复度，幻读</li><li>可重复读：会产生 幻读，MySQL默认的隔离级别，但MySQL通过mvcc解决幻读</li><li>串行化：强制事务之间以顺序的形式执行，不会有并发事务问题</li></ul></li><li>MySQL默认隔离级别是可重复读，它会有幻读吗？没有的话是如何解决幻读 <ul><li>SELECT查询分为快照读和实时读</li><li>快照读： <ul><li>通过MVCC来解决，MVCC是多版本并发控制，通过快照，一个事务在做更新操作的时候，另一个事务在读取的时候，读的是上一个版本的数据</li></ul></li><li>实时读： <ul><li>通过Next-Key Lock来解决幻读问题。</li><li>Next-Key Lock是Gap Lock（间隙锁）和Record Lock（行锁）的结合版。</li><li>比如，select * from id&gt;100 for update <ul><li>会给主键id=100的记录加上record行锁</li><li>主键id会加上gap锁，锁住id(100,+无穷大）的范围</li><li>其他事务对id&gt;=100范围的记录读和写操作都将被阻塞</li><li>这样就可以阻止其他事务修改该范围的数据，保证了不会出现幻读</li></ul></li></ul></li></ul></li></ul><h2 id="锁" tabindex="-1"><a class="header-anchor" href="#锁" aria-hidden="true">#</a> 锁</h2><ul><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%8A%A0%E9%94%81" target="_blank" rel="noopener noreferrer">1. 为什么要加锁?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>多用户环境保证数据库完整性和一致性</li><li>当多个用户并发存取数据时，在数据库就会产生多个事务存取同一数据的情况。如果对并发操作不加以控制可能会导致数据不正确，破坏一致性。</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_2-%E6%8C%89%E7%85%A7%E9%94%81%E7%9A%84%E7%B2%92%E5%BA%A6%E5%88%86%E6%95%B0%E6%8D%AE%E5%BA%93%E9%94%81%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F" target="_blank" rel="noopener noreferrer">2. 按照锁的粒度分数据库锁有哪些？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>行级锁：Mysql中粒度最细的锁，发生冲突概率低，并发高，但开销大。行级锁分为排它锁和共享锁。</li><li>表级锁：Mysql锁粒度最大，对整张表加锁，开销小，不会出现死锁，发生冲突的概率最大，并发度低。</li><li>页级锁：介于表级锁和行级锁之间的一种锁</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_3-%E4%BB%8E%E9%94%81%E7%9A%84%E7%B1%BB%E5%88%AB%E4%B8%8A%E5%88%86mysql%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%E9%94%81%E5%91%A2%EF%BC%9F" target="_blank" rel="noopener noreferrer">3. 从锁的类别上分MySQL都有哪些锁呢？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>锁的类别上分的话，分为共享锁和排它锁 <ul><li>共享锁：又叫读锁。读数据的时候，加上共享锁，可以多加几个。</li><li>排他锁：又叫写锁。写数据的时候，加上排他锁，只可以加一个，与其他排他锁，共享锁互斥。</li></ul></li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_4-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B9%90%E8%A7%82%E9%94%81%E5%92%8C%E6%82%B2%E8%A7%82%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F" target="_blank" rel="noopener noreferrer">4. 数据库的乐观锁和悲观锁是什么？怎么实现的？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>乐观锁和悲观锁是数据库并发控制中采用的主要技术手段</li><li>乐观锁：假设不会发生并发冲突，只是提交的时候检查一下数据的完整性，修改的时候给事务上锁，通过version的方式进行锁定。实现的方式有：CAS或加上版本号。</li><li>悲观锁：假设会发生并发冲突，屏蔽一切可能会违反数据完整性的一切操作。在查询完数据的时候就把事务锁起来，直到提交事务。实现方式：数据库锁机制。</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_5-innodb%E5%BC%95%E6%93%8E%E7%9A%84%E8%A1%8C%E9%94%81%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F" target="_blank" rel="noopener noreferrer">5. InnoDB引擎的行锁是怎么实现的？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>基于索引来实现的，如果sql语句不走索引，那么锁升级会表锁</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_6-%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%BB%E9%94%81%EF%BC%9F%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%EF%BC%9F" target="_blank" rel="noopener noreferrer">6. 什么是死锁？怎么解决？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>死锁是两个事务，相互占用对方的资源却相互请求，导致恶性循环的现象。</li><li>一个有趣的例子： <ul><li>面试官：如果你能回答什么是死锁，我就录取你。</li><li>面试者：如果你录取我，我就给你回答什么是死锁。</li></ul></li><li>常见的方式： <ul><li>如果不同程序会存取多个表，尽量约定以相同的顺序访问表。</li><li>在同一个事务，尽可能做到一次锁定所有的请求资源。</li><li>对于非常容易死锁的业务，可以通过锁升级为表锁的方式。</li></ul></li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_7-%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8E%E9%94%81%E7%9A%84%E5%85%B3%E7%B3%BB" target="_blank" rel="noopener noreferrer">7. 隔离级别与锁的关系<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>Read Uncommitted 读数据不加共享锁</li><li>Read committeed 读数据加共享锁，读取完成后释放</li><li>Repeatable Read 读数据加排他锁，事务完成后释放</li><li>SERIALIZABLE 锁定整个范围的键，事务完成后释放</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_8-%E4%BC%98%E5%8C%96%E9%94%81%E6%96%B9%E9%9D%A2%E7%9A%84%E6%84%8F%E8%A7%81%EF%BC%9F" target="_blank" rel="noopener noreferrer">8. 优化锁方面的意见？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>使用较低的隔离级别</li><li>设计索引，尽量使用索引去访问数据</li><li>合理选择事务的大小，给记录显示加锁，最后一次性请求足够多的资源</li><li>数据查询的时候，不是非必要，不要上锁。MySQL的MVCC可以实现事务中查询不用加锁，优化事务性能。注意：MVCC 只在Read Commiteed 和 Repeatable Read 的时候生效。</li></ul></li><li><p>9什么是Mysql锁升级？（PDF）</p><ul><li>MySQL行锁只能加在索引上，如果操作不走索引，那么会升级为表锁。</li><li>当非唯一索引重复记录超过表记录的一半时候，行锁也会升级为表锁，因为它底层会索引失效，自然不走行锁。</li></ul></li><li><p>innodb有哪些锁</p><ul><li>行锁 <ul><li>行锁分为共享锁和排他锁</li><li>共享锁加锁方式：select * from table where xxx for share;</li><li>排他锁加锁方式：select * from table where xxx for update;</li></ul></li><li>表锁/意向锁 <ul><li>表级锁又叫做意向锁，指示事务稍后对表中的行需要哪种类型的锁（排他锁或共享锁）。所以又分为两种类型的意向锁。</li></ul></li><li>记录锁Record Locks ：记录锁是对索引记录的锁定 <ul><li>select c1 from t where c1 = 10 for update;</li><li>表示防止任何其他事务插入、更新或删除t.c1=10的行。</li></ul></li><li>间隙锁Gap Locks ：记录锁是对索引记录的锁定 <ul><li>select c1 from t where c1 between 10 and 20 for update;</li><li>表示防止其他事务动（插入、更新或删除）t.c1在10～20中的记录。</li></ul></li><li>下一个键锁/临界锁 Next-Key Locks <ul><li>是索引记录上的记录锁和索引记录之前的间隙上的间隙锁的组合。即Next-Key Lock 包含 Record Lock 和 Gap Lock。</li><li>默认情况下，InnoDB在可重复读取事务隔离级别下运行。在这种情况下，InnoDB使用next key lock进行搜索和索引扫描，从而防止幻读。</li></ul></li><li>插入意向锁Insert Intension Locks <ul><li>插入意向锁是在行插入之前由插入操作设置的一种间隙锁。</li></ul></li><li>自增锁 <ul><li>AUTO-INC锁是一种特殊的表级锁，由插入到具有自动增量列的表中的事务使用。</li></ul></li></ul></li><li><p>数据库如何用到CAS机制</p><ul><li>在表中有一个字段value</li><li>然后第一次拿的时候，去记录一下第一次拿的value值</li><li>执行更新操作的时候，去拿一下value，判断是否改变，如果没改变就直接更新</li><li>但是这样会有ABA的问题，我们可以在加一个版本号字段解决</li></ul></li></ul><h2 id="sql调优" tabindex="-1"><a class="header-anchor" href="#sql调优" aria-hidden="true">#</a> SQL调优</h2><ul><li><p>SQL调优</p><ul><li>首先禁止使用select *</li><li>用explian查看sql 语句是否命中索引，没有的话就修改sql，该加索引就加索引</li><li>避免使用or ，is null ，&lt;&gt; 操作符</li><li>复合索引和like语句要遵守最左匹配原则</li><li>字符串字段的话要加双引号</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_1-%E5%A6%82%E4%BD%95%E5%AE%9A%E4%BD%8D%E5%8F%8A%E4%BC%98%E5%8C%96sql%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98%EF%BC%9F" target="_blank" rel="noopener noreferrer">1. 如何定位及优化SQL语句的性能问题？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>explian 一下SQL语句</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_2-%E5%A4%A7%E8%A1%A8%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%EF%BC%8C%E6%80%8E%E4%B9%88%E4%BC%98%E5%8C%96" target="_blank" rel="noopener noreferrer">2. 大表数据查询，怎么优化<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>优化sql语句，加索引</li><li>加Redis等缓存</li><li>主从复制，读写分离</li><li>垂直拆分，水平拆分</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_3-%E8%B6%85%E5%A4%A7%E5%88%86%E9%A1%B5%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86" target="_blank" rel="noopener noreferrer">3. 超大分页怎么处理?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li><code>select * from table where age &gt; 20 limit 1000000</code>,10 这种查询其实也是有可以优化的余地的. 这条语句需要 load1000000 数据然后基本上全部丢弃,只取 10 条当然比较慢. 当时我们可以修改为<code>select * from table where id in (select id from table where age &gt; 20 limit 1000000,10)</code>.这样虽然也 load 了一百万的数据,但是由于索引覆盖,要查询的所有字段都在索引中,所以速度会很快。</li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_4-%E7%BB%9F%E8%AE%A1%E8%BF%87%E6%85%A2%E6%9F%A5%E8%AF%A2%E5%90%97%EF%BC%9F%E5%AF%B9%E6%85%A2%E6%9F%A5%E8%AF%A2%E9%83%BD%E6%80%8E%E4%B9%88%E4%BC%98%E5%8C%96%E8%BF%87%EF%BC%9F" target="_blank" rel="noopener noreferrer">4. 统计过慢查询吗？对慢查询都怎么优化过？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>我们一般sql耗时，一般都会在测试库里面测。慢查询统计主要是运维在做，会定期将业务中的慢查询反馈给我</li><li>慢首先要分析为什么慢？是不是加载了多余的列，sql语句没走索引，还是数据量太多？ <ul><li>分析一下SQL，看看是不是load多余的列</li><li>explain下SQL语句，看看是不是没走索引，优化SQL使其尽量走索引</li><li>数据量太大的话可以分库分表</li></ul></li></ul></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_5-%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E6%9F%A5%E8%AF%A2%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%AE%BF%E9%97%AE" target="_blank" rel="noopener noreferrer">5. 如何优化查询过程中的数据访问<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_6-%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2" target="_blank" rel="noopener noreferrer">6. 如何优化关联查询<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_8-mysql%E6%95%B0%E6%8D%AE%E5%BA%93cpu%E9%A3%99%E5%8D%87%E5%88%B0500%E7%9A%84%E8%AF%9D%E4%BB%96%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86%EF%BC%9F" target="_blank" rel="noopener noreferrer">8. MySQL数据库cpu飙升到500%的话他怎么处理？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p><a href="https://www.javalearn.cn/#/doc/MySQL/%E9%9D%A2%E8%AF%95%E9%A2%98?id=_9-%E5%A4%A7%E8%A1%A8%E6%80%8E%E4%B9%88%E4%BC%98%E5%8C%96%EF%BC%9F" target="_blank" rel="noopener noreferrer">9. 大表怎么优化？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>限定范围查询</li><li>读写分离</li><li>分库分表</li></ul></li><li><p>百万级别的数据如何删除</p><ul><li>关于索引：索引</li><li>先删除索引（大概三分钟）</li><li>删除要删除的数据（看要删除的数据量，一般不超过两分钟）</li><li>重新建立刚删除的索引（数据量相对少了，建索引更快了）</li></ul></li><li><p>select a from table where b = &#39;xxx&#39; group by c 如何建立索引</p><ul><li>联合索引bca ，bc是为了覆盖索引的同时避免filesort</li><li>而a是为了避免回表查询</li><li><a href="https://blog.csdn.net/m0_46405589/article/details/112601638" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/m0_46405589/article/details/112601638<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul></li></ul><h2 id="分库分表" tabindex="-1"><a class="header-anchor" href="#分库分表" aria-hidden="true">#</a> 分库分表</h2><ul><li>什么是分库分表？ <ul><li>分库是指把一个数据库拆分成多个数据库，一般分为水平分库和垂直分库。</li><li>分表是指通过一定的规则，把一张表分解成多张不同的表，一般分为水平分表和垂直分表。 <ul><li>水平分表：就是一般意义的去分表，按行去分</li><li>垂直分表：把宽表拆成几张细表</li></ul></li></ul></li><li>分库和分表他们解决的问题有什么不一样 <ul><li>分库的目标主要解决的问题是：减少单一数据库的负债，提高数据库的并发能力，方便横向扩展。</li><li>分表解决的问题是：大表会导致性能差的问题（查询性能慢，写入压力大）</li></ul></li></ul><h2 id="主从复制" tabindex="-1"><a class="header-anchor" href="#主从复制" aria-hidden="true">#</a> 主从复制</h2><ul><li><p>为什么要主从复制</p><ul><li>提高Mysql性能，读写分离主写从读，分工，减少单机的压力</li></ul></li><li><p>MySQL主从复制的原理</p><ul><li>master节点修改的时候会把记录 记录到bin log</li><li>slave 节点会有一个IO线程去读取master的bin log</li><li>会在slave 节点生成一份Relay log</li><li>slave节点的SQL 线程会去读取这个Relay log，然后解析成SQL语句在slave库执行一遍</li></ul></li></ul><h2 id="mysql架构" tabindex="-1"><a class="header-anchor" href="#mysql架构" aria-hidden="true">#</a> MySQL架构</h2><ul><li>server层和引擎层各自的职责 <ul><li>Server层：负责处理客户端连接、解析查询请求、执行查询语句、管理事务、安全认证、并发控制以及其他管理任务。</li><li>存储引擎层负责将数据存储到磁盘上，并处理数据的读取和写入操作。</li></ul></li></ul><h2 id="数据库连接池" tabindex="-1"><a class="header-anchor" href="#数据库连接池" aria-hidden="true">#</a> 数据库连接池</h2><ul><li>数据库连接池有什么用 <ul><li>数据库连接池是一种池化技术，池化技术的核心思想是实现资源的复用，避免资源重复创建销毁的开销。</li><li>而在数据库的应用场景里面，应用程序每次向数据库发起 CRUD 操作的时候，都需要创建连接，在数据库访问量较大的情况下，频繁的创建连接会带来较大的性能开销。</li><li>而连接池的核心思想，就是应用程序在启动的时候提前初始化一部分连接保存到连接池里面，当应用需要使用连接的时候，直接从连接池获取一个已经建立好的链接。</li><li>连接池的设计，避免了每次连接的建立和释放带来的开销。</li></ul></li><li>数据库连接池参数有哪些 <ul><li>连接池初始化的时候会有几个关键参数： <ul><li>初始化连接数，表示启动的时候初始多少个连接保存到连接池里面</li><li>最大连接数，表示同时最多能支持多少连接，如果连接数不够，后续要获取连接的线程会阻塞。</li><li>最大空闲连接数，表示没有请求的时候，连接池中要保留的最大空闲连接。</li><li>最小空闲连接，当连接数小于这个值的时候，连接池需要再创建连接来补充到这个值。</li><li>最大等待时间，就是连接池里面的连接用完了以后，新的请求要等待的时间，超过这个时间就会提示超时异常。</li><li>无效连接清除，清理连接池里面的无效连接，避免使用这个连接操作的时候出现错误。</li></ul></li></ul></li></ul></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/vuepress-theme-hope/vuepress-theme-hope/edit/main/src/java/MySQL.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav"><a class="vp-link nav-link prev" href="/java/MQ.html"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span>MQ</div></a><a class="vp-link nav-link next" href="/java/Redis.html"><div class="hint">Next<span class="arrow end"></span></div><div class="link">Redis<span class="font-icon icon fa-fw fa-sm fas fa-pen-to-square" style=""></span></div></a></nav><div id="comment" class="waline-wrapper" darkmode="false" style="display:block;"><div data-waline provider="Waline"><!--v-if--><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="wl-nick">NickName</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="wl-mail">E-Mail</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="wl-link">Website</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="Write a comment here (Fill in the email address to receive an email notification when being replied)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>Preview:</h4><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noopener noreferrer"><svg width="16" height="16" ariaHidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button type="button" class="wl-action" title="Emoji" style="display:none;"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button type="button" class="wl-action" title="GIF"><svg width="24" height="24" fill="currentcolor" viewBox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="Upload Image"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button type="button" class="wl-action" title="Preview"><svg viewBox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-captcha-container"></div><div class="wl-text-number">0 <!--v-if-->  Words</div><button type="button" class="wl-btn">Login</button><button type="submit" class="primary wl-btn" title="Cmd|Ctrl + Enter"><!--[-->Submit<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="Search GIF"><!--v-if--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-meta-head"><div class="wl-count"><!--v-if--> Comments</div><ul class="wl-sort"><!--[--><li class="active">Latest</li><li class="">Oldest</li><li class="">Hottest</li><!--]--></ul></div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokeWidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributeName="transform" type="rotate" repeatCount="indefinite" dur="1s" values="0 50 50;360 50 50" keyTimes="0;1"></animateTransform></circle></svg></div><!--]--><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noopener noreferrer"> Waline </a> v2.15.5</div></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Default footer</div><div class="vp-copyright">Copyright © 2023 blueSky</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-a0ba2b3f.js" defer></script>
  </body>
</html>
